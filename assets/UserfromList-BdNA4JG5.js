import{j as e,p as j,$ as b,r as o,S as w,u as f}from"./index-DxYrGPuB.js";import{F as N}from"./FromPreview-B9aP6I_L.js";import"./FormContainer-gQGx1Dsz.js";import{C as P,A as y}from"./Tag-BddxHN8B.js";import{B as S}from"./hoist-non-react-statics.cjs-Ci2CuKH8.js";import{P as F}from"./Upload-Ck9jiP_Q.js";import"./Select-xF-sg4aH.js";import"./toast-DqtlumJS.js";import{L as n,M as k}from"./Views-CqBX4VKw.js";import{g as I}from"./FormList-CkjX1Ir5.js";const v=({title:i,describe:r,showButtom:s,buttonText:t,buttonClick:m})=>e.jsxs("div",{className:"lg:flex items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h3",{children:i}),e.jsx("p",{children:r})]}),s&&e.jsx("div",{children:e.jsx(S,{className:"mr-2 mb-2",variant:"solid",color:"green-600",onClick:m,children:t})})]}),D=()=>{const i=j(),{id:r}=b(),[s,t]=o.useState(null),[m,x]=o.useState(!0),[p,c]=o.useState(null);if(o.useEffect(()=>{(async()=>{try{x(!0);const a=localStorage.getItem("selectedDepartmentID")||"",g=localStorage.getItem("selectedTeamID"),u=localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),h=await I(a,g?Number(g):null,u,String(r));if(h&&h.data)t(h.data.data);else throw new Error("Invalid response data")}catch(a){console.error("Error fetching data:",a),c("Failed to load data. Please try again.")}finally{x(!1)}})()},[r]),m)return e.jsxs("div",{className:"flex justify-center items-center h-full",children:[e.jsx(w,{size:"lg"}),e.jsx("p",{className:"ml-4 text-gray-500",children:"Loading data..."})]});if(p)return e.jsx("div",{className:"text-center text-red-500",children:e.jsx("p",{children:p})});if(!s)return e.jsx("div",{className:"text-center text-gray-500",children:e.jsx("p",{children:"No data available."})});const d=[{icon:"/img/others/qulity.png",title:"FORM - A",label:"Employee Performance Contract",progress:[{title:"STAFF",percentage:s.staff.form_a,color:"yellow-500"},{title:"SUPERVISOR",percentage:s.supervisor.form_a,color:"yellow-500"}],link:`${n}/supervisor/planning/${r}`,background:"bg-blue-500",textColor:"text-white"},{icon:"/img/others/qulity.png",title:"FORM - B",label:"Employee Quarterly Appraisal",progress:[{title:"STAFF",percentage:s.staff.form_b,color:"blue-500"},{title:"SUPERVISOR",percentage:s.supervisor.form_b,color:"blue-500"}],link:`${n}/supervisor/review/${r}`,background:"bg-green-500",textColor:"text-white"},{icon:"/img/others/qulity.png",title:"FORM - C",label:"Employee Annual Appraisal",progress:[{title:"STAFF",percentage:s.staff.form_c,color:"green-500"},{title:"SUPERVISOR",percentage:s.supervisor.form_c,color:"green-500"}],link:`${n}/supervisor/annual-review/${r}`,background:"bg-orange-500",textColor:"text-white"}];return e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map((l,a)=>e.jsx(P,{clickable:!0,className:`hover:shadow-lg transition duration-150 ease-in-out ${l.background}`,onClick:()=>l.link&&i(l.link),children:e.jsxs("div",{className:`flex flex-col lg:flex-row lg:items-center justify-between gap-4 ${l.textColor}`,children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:l.icon,alt:"icon",className:"w-12 h-12 object-contain"}),e.jsxs("div",{children:[e.jsx("h6",{className:`${l.textColor}`,children:l.title}),e.jsx("span",{children:l.label})]})]}),e.jsx("div",{className:"flex justify-center gap-4",children:l.progress.map((g,u)=>e.jsxs("div",{children:[e.jsx(F,{variant:"circle",percent:g.percentage,color:g.color,width:60}),e.jsx("div",{className:"text-xs",children:g.title})]},u))})]})},a))})},$=()=>{const i=j(),{id:r}=b();console.log("staffId",r);const s=[{icon:"/img/others/qulity.png",title:"Performance Appraisal Dispute Form (PADF)",label:"",progress:[],link:`${n}/supervisor/Performance-Appraisal-Dispute/${r}`,background:"bg-blue-500",textColor:"text-white",id:1},{icon:"/img/others/qulity.png",title:"Performance Improvement Plan (PIP)",label:"",progress:[],link:`${n}/supervisor/Performance-Improvement-Plan/${r}`,background:"bg-green-500",textColor:"text-white",id:2},{icon:"/img/others/qulity.png",title:"Individual Development Plans Form (IDPF)",label:"",progress:[],link:`${n}/Individual-Development-Plans/${r}`,background:"bg-orange-500",textColor:"text-white",id:3},{icon:"/img/others/qulity.png",title:"Monthly Performance Review Form (MPRF)",label:"",progress:[],link:`${n}/supervisor/Monthly-Performance-Review/${r}`,background:"bg-blue-500",textColor:"text-white",id:4},{icon:"/img/others/qulity.png",title:"MPMS Form",label:"",progress:[],link:`${k}/mpms/list_mpms`,background:"bg-green-500",textColor:"text-white",id:5}];return e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(t=>e.jsx(e.Fragment,{children:e.jsx(P,{clickable:!0,className:`hover:shadow-lg transition duration-150 ease-in-out ${t.background}`,onClick:()=>{t.link&&i(t.link)},children:e.jsx("div",{className:`flex flex-col lg:flex-row lg:items-center justify-between gap-4 ${t.textColor}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{children:e.jsx("img",{src:t.icon,alt:"icon"})}),e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h6",{className:`${t.textColor}`,children:t.title})}),e.jsx("div",{children:e.jsx("span",{children:t.label})})]})]})})},t.id)}))})},L=()=>{const{avatar:i,userName:r}=f(c=>c.auth.user),s=f(c=>c.department.selectedYear),[t,m]=o.useState(null),[x,p]=o.useState(null);return o.useEffect(()=>{m(s)},[s]),o.useEffect(()=>{(async()=>{try{if(t){const d=`formPreview_${t}`,l=localStorage.getItem(d);if(l)p(JSON.parse(l));else{const a=await N(t);p(a),localStorage.setItem(d,JSON.stringify(a)),console.log("Fetched from API:",a)}}else console.log("No year selected")}catch(d){console.error("Failed to fetch form preview:",d)}})()},[t]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx(y,{size:40,shape:"circle",src:i||"/img/avatars/No_user.jpeg"}),e.jsx("div",{className:"ms-4",children:e.jsx("h3",{children:r})})]}),e.jsxs("div",{children:[e.jsx(v,{title:"Individual Performance Database Section"}),e.jsx(D,{})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(v,{title:"Other PMS Resources",describe:"",showButtom:!1}),e.jsx($,{})]})]})};export{L as default};

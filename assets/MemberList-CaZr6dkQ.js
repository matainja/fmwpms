import{a0 as w,j as e,r as o,p as f,u as v,W as N}from"./index-DxYrGPuB.js";import"./FormContainer-gQGx1Dsz.js";import{C as j,a as b,b as u}from"./Tag-BddxHN8B.js";import{B as D}from"./hoist-non-react-statics.cjs-Ci2CuKH8.js";import{P as y,b as T}from"./Upload-Ck9jiP_Q.js";import"./Select-xF-sg4aH.js";import"./toast-DqtlumJS.js";import{n as S}from"./not_user-D__Z_M0H.js";import"./Views-CqBX4VKw.js";async function _(i){try{const r=(await w({url:`/supervisor/team_preview/${i}`,method:"get"})).data;return console.log(r),r}catch(t){throw console.error("Error making API request:",t),t}}const A=({team_name:i,team_description:t,team_status:r,team_progressive:n})=>e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(j,{className:"md:col-span-2 bg-[#018752]",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-xl font-semibold text-white",children:i}),e.jsx(b,{className:`text-white ${r==="1"?"bg-green-600":"bg-gray-500"}`,children:r==="1"?"Active":"Inactive"})]}),e.jsx("p",{className:"mt-4 text-white",children:t})]})}),e.jsx(j,{className:"bg-[#018752]",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-white",children:"Progression"}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(y,{variant:"circle",percent:n,width:100,strokeWidth:4,"aria-label":`Progress: ${n}%`})})]})})]}),I=({departments:i})=>{const[t,r]=o.useState(null),[n,l]=o.useState(window.innerWidth<=1024);o.useEffect(()=>{const a=()=>{l(window.innerWidth<=1024)};return window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]);const s=a=>{r(a)};return e.jsxs("div",{className:"my-4 px-2",children:[e.jsx("h5",{className:"text-xl font-bold mb-4 text-gray-800",children:"Associated Department List"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(a=>{const m=a.name.split(" ").slice(0,5).join(" "),d=a.description.split(" "),g=d.slice(0,15).join(" "),c=d.length>15;return e.jsxs(j,{className:"bg-[#018752] rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 ease-in-out border border-gray-200",children:[e.jsx("h5",{className:"text-xl font-semibold text-white mb-2",children:m}),e.jsxs("p",{className:"text-white text-sm",children:[g,c&&e.jsxs(e.Fragment,{children:["...",e.jsx("button",{className:"text-blue-400 hover:underline ml-1",onClick:()=>s(a),children:"View All"})]})]})]},a.department_id)})}),t&&e.jsx(T,{title:"Department Details",isOpen:!!t,placement:"right",width:n?"100%":600,onClose:()=>s(null),children:e.jsxs("div",{className:"p-6 bg-gray-100 rounded-md shadow-md",children:[e.jsx("h6",{className:"text-xl font-bold text-gray-800",children:t.name}),e.jsx("p",{className:"mt-3 text-gray-600 leading-relaxed",children:t.description})]})})]})},{Tr:p,Th:h,Td:x,THead:P,TBody:L}=u,E=({assignStaffs:i})=>{const t=f(),{staff_id:r}=v(s=>s.auth.user||{}),n=localStorage.getItem("selectedTeamID")||"";N(n);const l=s=>{t(`/supervisor/formList/${s}`)};return e.jsxs("div",{className:"my-6",children:[e.jsx("h5",{className:"text-lg font-semibold",children:"User List"}),e.jsxs(u,{compact:!0,className:"mt-4",children:[e.jsx(P,{children:e.jsxs(p,{children:[e.jsx(h,{children:"Name"}),e.jsx(h,{children:"Role"}),e.jsx(h,{children:"Action"})]})}),e.jsx(L,{children:i.map(s=>e.jsxs(p,{children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.image||S,alt:s.name||"User Avatar",className:"w-10 h-10 rounded-full"}),e.jsx("span",{children:s.name})]})}),e.jsx(x,{children:s.role}),e.jsx(x,{children:e.jsx(D,{variant:"solid",disabled:s.role!=="staff",onClick:()=>l(s.staff_id),children:"View Form"})})]},s.staff_id))})]})]})},R=()=>{const[i,t]=o.useState(null),r=localStorage.getItem("selectedTeamID");if(o.useEffect(()=>{(async()=>{if(r)try{const c=await _(r);t(c)}catch(c){console.error("Failed to fetch team details:",c)}else console.warn("No team ID found in local storage.")})()},[r]),!i)return e.jsx("p",{children:"Loading..."});const{team_name:n,team_description:l,team_status:s,team_progressive:a,team_department:m,team_assign_staffs:d}=i;return e.jsxs("div",{children:[e.jsx(A,{team_name:n,team_description:l,team_status:s,team_progressive:a}),e.jsx(I,{departments:m}),e.jsx(E,{assignStaffs:d})]})};export{R as default};

import{t as N,r as b,v as n,j as e,W as m}from"./index-C8vrx0GC.js";import{I as F,B as k}from"./hoist-non-react-statics.cjs-CJs8X_wk.js";import{S as P,C as A}from"./Select-C0lH1PzN.js";import{A as C,F as q,a as c}from"./FormContainer-3VQFa0ev.js";import{u as E,P as O,A as u}from"./useTimeOutMessage-BeqPWOtO.js";import{F as R,a as $,b as d}from"./formik.esm-CWCxLKWr.js";import{c as B,a as D,b as p}from"./index.esm-Cykekrk-.js";import"./Views-BVfBl8-H.js";import"./useThemeClass-BtgAA4YG.js";import"./cloneDeep-DznBgb_t.js";const J=B().shape({email:p().required("Please enter your Email or Ippis No"),password:p().required("Please enter your password"),role:p().required("Please select Role"),rememberMe:D()}),x=[{value:"staff",label:"Staff"},{value:"supervisor",label:"Supervisor"},{value:"officer",label:"Officer"}],L=g=>{const{disableSubmit:h=!1,className:j,forgotPasswordUrl:w="/forgot-password"}=g,[f,v]=E(),{signIn:I}=N(),[S,M]=b.useState({email:"",password:"",role:"staff",rememberMe:!1});b.useEffect(()=>{const a=sessionStorage.getItem("rememberMe");if(a)try{const s=JSON.parse(a);M({email:n(s.email||""),password:n(s.password||""),role:n(s.role||"staff"),rememberMe:!0})}catch(s){console.error("Failed to decrypt session data:",s)}},[]);const y=async(a,s)=>{const{email:o,password:t,role:l,rememberMe:r}=a;s(!0);const i=await I({email:o,password:t,role:l});(i==null?void 0:i.status)==="failed"?v(i.message):r?sessionStorage.setItem("rememberMe",JSON.stringify({email:m(o),password:m(t),role:m(l),rememberMe:!0})):sessionStorage.removeItem("rememberMe"),s(!1)};return e.jsxs("div",{className:j,children:[f&&e.jsx(C,{showIcon:!0,className:"mb-4",type:"danger",children:f}),e.jsx(R,{enableReinitialize:!0,initialValues:S,validationSchema:J,onSubmit:(a,{setSubmitting:s})=>{h?s(!1):y(a,s)},children:({touched:a,errors:s,isSubmitting:o,setFieldValue:t,values:l})=>e.jsx($,{children:e.jsxs(q,{children:[e.jsx(c,{invalid:!!s.email&&a.email,errorMessage:s.email,children:e.jsx(d,{type:"text",autoComplete:"off",name:"email",placeholder:"Email or Ippis No",component:F})}),e.jsx(c,{invalid:!!s.password&&a.password,errorMessage:s.password,children:e.jsx(d,{autoComplete:"off",name:"password",placeholder:"Password",component:O})}),e.jsx(c,{invalid:!!s.role&&a.role,errorMessage:s.role,children:e.jsx(P,{placeholder:"Select Role",options:x,value:x.find(r=>r.value===l.role),onChange:r=>t("role",r==null?void 0:r.value)})}),e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx(d,{className:"mb-0 text-black font-semibold",name:"rememberMe",component:A,color:"indigo-600 border-2 border-black",children:"Remember Me"}),e.jsx(u,{to:w,children:e.jsx("span",{className:"text-black font-semibold",children:"Forgot Password?"})})]}),e.jsx(k,{block:!0,loading:o,className:"!bg-indigo-600 hover:!bg-indigo-800 text-white rounded-lg border-none",type:"submit",children:o?"Signing in...":"Sign In"}),e.jsx("div",{className:"mt-4 text-center text-base font-semibold ",children:e.jsx(u,{to:"/public/faq",children:e.jsx("span",{className:"text-white italic",children:"Frequently Asked Questions"})})})]})})})]})},Y=()=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4 text-center ",children:e.jsx("h3",{className:"mb-3 text-2xl font-bold text-gray-800 tracking-wide",children:"Log-in"})}),e.jsx(L,{disableSubmit:!1})]});export{Y as default};

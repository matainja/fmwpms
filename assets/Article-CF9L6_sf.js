import{$ as j,p as y,r as o,j as e,c as v}from"./index-Ej4AVjRg.js";import{A as b}from"./AdaptableCard-D-LDYI-w.js";import{C}from"./Tag-D8aiboSU.js";import"./SvgIcon-jMRVl-Zs.js";import{B as x,I as k}from"./hoist-non-react-statics.cjs-BQHh-fLB.js";import{I as A,J as w,C as S}from"./Views-uHEBKrsi.js";import{M as I}from"./MediaSkeleton-DOZO2X6y.js";import{T as m,p as U,f as M}from"./parse-DNtinKKu.js";import{U as E}from"./UsersAvatarGroup-DXl85Ji_.js";import{A as H,f as P}from"./Faq-AHouA7zM.js";import{t as u,N as p}from"./toast-BTxsn9q5.js";import{R as g}from"./index-NwfkNoHA.js";import"./Select-DHCGiIJq.js";import"./index-BwvIBFmT.js";import"./quill.snow-B129hOHY.js";import"./cloneDeep-DznBgb_t.js";import"./useThemeClass-BVB5MDmc.js";import"./acronym-DNcTb2Mn.js";const R=()=>{const{articleId:s}=j(),r=y(),t=o.useRef(null),[a,n]=o.useState(null),l=o.useCallback(c=>{n(c==="Y"?1:0)},[]),i=async()=>{var d,f;const c=(f=(d=t.current)==null?void 0:d.value)==null?void 0:f.trim();if(!c||a===null||!s){u.push(e.jsx(p,{title:"Warning",type:"warning",children:"Please select Yes/No and write a comment."}),{placement:"top-center"});return}const h={article_id:s,comments:c,status:a};try{(await H(h)).status===201&&(u.push(e.jsx(p,{title:"Success",type:"success",children:"Comment submitted successfully!"}),{placement:"top-center"}),n(null),t.current&&(t.current.value=""),r("/faq"))}catch{u.push(e.jsx(p,{title:"Error",type:"danger",children:"Failed to submit comment."}),{placement:"top-center"})}};return e.jsxs(e.Fragment,{children:[e.jsxs(C,{bordered:!0,className:"mt-8",bodyClass:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h5",{children:"Was this article helpful?"}),e.jsx("p",{children:a!==null?`${a} out of 1 found this helpful`:"0 out of 1"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{icon:a===1&&e.jsx(A,{}),variant:a===1?"solid":"default",onClick:()=>l("Y"),children:e.jsx("span",{children:"Yes"})}),e.jsx(x,{icon:a===0&&e.jsx(w,{}),variant:a===0?"solid":"default",onClick:()=>l("N"),children:e.jsx("span",{children:"No"})})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h3",{className:"mb-4",children:"Comments"}),e.jsx(k,{ref:t,textArea:!0,placeholder:"Enter your comment here..."}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsx(x,{variant:"solid",onClick:i,children:"Submit"})})]})]})},_=({loading:s,articleData:r})=>{var t,a,n;return s?e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(I,{}),e.jsx(m,{rowCount:6}),e.jsx(m,{rowCount:4}),e.jsx(m,{rowCount:8})]}):r?e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold",children:r.title||"Untitled"}),e.jsxs("div",{className:"flex items-center mt-4 gap-4",children:[e.jsx(E,{avatarProps:{size:40},users:[{name:((t=r.author)==null?void 0:t.name)||"Unknown Author",image:((a=r.author)==null?void 0:a.image)||""}]}),e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{className:"mb-1",children:["Created by:",e.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100 ml-1",children:((n=r.author)==null?void 0:n.name)||"Unknown"})]}),e.jsx("div",{children:e.jsxs("span",{children:["Category:",r.category||"Uncategorized"]})})]})]}),e.jsx("div",{className:"mt-8 prose dark:prose-invert max-w-none",children:g(r.content||"No content available.")}),e.jsx(R,{})]}):e.jsx("p",{className:"text-gray-500",children:"No article data available."})},L=({count:s=2})=>e.jsx("div",{className:"flex flex-col mt-6",children:Array.from({length:s},(r,t)=>t).map((r,t)=>e.jsxs("div",{children:[e.jsx(m,{rowCount:2}),t!==s-1&&e.jsx("hr",{className:"my-6"})]},t))}),Y=({article:s,isLastChild:r})=>{const t=y(),a=l=>{t(`/article/${l}`)},n=l=>{const i=U(l,"yyyy-MM-dd HH:mm:ss",new Date);return M(i,"dd MMMM yyyy, hh:mm:ss a")};return e.jsxs("div",{className:v("py-6 group cursor-pointer",!r&&"border-b border-gray-200 dark:border-gray-600"),onClick:()=>a(s.id),children:[e.jsx("h6",{className:"mb-1 group-hover:underline text-sm",children:s.title||"Untitled"}),e.jsx("p",{className:"mb-1",children:g(s.content||"")}),e.jsxs("span",{className:"text-xs",children:["Updated ",n(s.updated_at)]})]})},B=({relatedArticles:s=[],isLoading:r=!1})=>e.jsx("div",{className:"lg:w-[400px] mt-6 ltr:lg:border-l rtl:lg:border-r border-gray-200 dark:border-gray-600 md:px-8",children:e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{children:"Related Topics"}),r?e.jsx(L,{count:s.length||2}):s.map((t,a)=>e.jsx(Y,{article:t,isLastChild:a===s.length-1},t.id))]})}),re=()=>{const{articleId:s}=j(),[r,t]=o.useState(null),[a,n]=o.useState(!0),[l,i]=o.useState(null);if(o.useEffect(()=>{(async()=>{if(!s){i("Invalid article ID"),n(!1);return}try{const d=await P(s);t(d.data)}catch(d){console.error("Error fetching article data:",d),i("Failed to fetch article data. Please try again.")}finally{n(!1)}})()},[s]),l)return e.jsx("p",{className:"text-red-600",children:l||"No article data found."});const{related_articles:c}=r||{};return e.jsx(S,{children:e.jsxs(b,{bodyClass:"lg:flex gap-4",children:[e.jsx("div",{className:"my-6 max-w-[800px] w-full mx-auto",children:e.jsx(_,{loading:a,articleData:r})}),e.jsx(B,{relatedArticles:c,isLoading:a})]})})};export{re as default};

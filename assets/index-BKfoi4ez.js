import{r as c,k as C,j as e,p as v,a1 as O,a0 as S,J as D}from"./index-DxYrGPuB.js";import{C as N,A as T,B as _,b as L}from"./Tag-BddxHN8B.js";import{b as A,c as E,d as k,e as M,A as R,f as Y}from"./SvgIcon-CxecnIM0.js";import{B}from"./hoist-non-react-statics.cjs-Ci2CuKH8.js";import"./Views-CqBX4VKw.js";import"./FormContainer-gQGx1Dsz.js";import{P as J}from"./Upload-Ck9jiP_Q.js";import"./Select-xF-sg4aH.js";import"./toast-DqtlumJS.js";import{u as I}from"./useThemeClass-OagxHL70.js";import{N as $}from"./react-number-format.es-DxecsCQA.js";import"./index-C5oRzy9o.js";import"./quill.snow-BsEul1hU.js";import"./cloneDeep-DznBgb_t.js";const P=["line","bar","area"],F=s=>{const{series:t=[],width:a="100%",height:r=300,xAxis:d,customOptions:o,type:n="line",direction:h,donutTitle:g,donutText:f,className:i,...m}=s,l=c.useRef(null),j=c.useMemo(()=>{switch(n){case"line":return A;case"bar":return M;case"area":return k;case"donut":return E;default:return A}},[n]);let u=JSON.parse(JSON.stringify(j));const w=window.innerWidth<768,y=c.useCallback(()=>{if(l.current){const p=l.current.querySelectorAll("div.apexcharts-legend")[0];h===C&&(p.style.right="auto",p.style.left="0"),w&&(p.style.position="relative",p.style.top="0",p.style.justifyContent="start",p.style.padding="0")}},[h,w]);return c.useEffect(()=>{P.includes(n)&&y()},[n,y]),P.includes(n)&&(u.xaxis.categories=d),o&&(u={...u,...o}),n==="donut"&&(g&&(u.plotOptions.pie.donut.labels.total.label=g),f&&(u.plotOptions.pie.donut.labels.total.formatter=()=>f)),e.jsx("div",{ref:l,style:h===C?{direction:"ltr"}:{},className:"chartRef",children:e.jsx(R,{options:u,type:n,series:t,width:a,height:r,className:i,...m})})},H=({data:s={},className:t})=>{console.log(s);const a={legend:{show:!1}};return e.jsxs(N,{className:t,children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("h4",{children:"Department performance report"})}),e.jsx(F,{series:s.series,xAxis:s.categories,height:"380px",customOptions:a})]})},b={0:{label:"Paid",dotClass:"bg-emerald-500",textClass:"text-emerald-500"},1:{label:"Pending",dotClass:"bg-amber-500",textClass:"text-amber-500"},2:{label:"Failed",dotClass:"bg-red-500",textClass:"text-red-500"}},V=({row:s})=>{const{textTheme:t}=I(),a=v(),r=c.useCallback(()=>{a(`/app/sales/order-details/${s.id}`)},[a,s]);return e.jsxs("span",{className:`cursor-pointer select-none font-semibold hover:${t}`,onClick:r,children:["#",s.id]})},x=Y();x.accessor("id",{header:"Order",cell:s=>e.jsx(V,{row:s.row.original})}),x.accessor("status",{header:"Status",cell:s=>{const{status:t}=s.row.original;return e.jsxs("div",{className:"flex items-center",children:[e.jsx(_,{className:b[t].dotClass}),e.jsx("span",{className:`ml-2 rtl:mr-2 capitalize font-semibold ${b[t].textClass}`,children:b[t].label})]})}}),x.accessor("date",{header:"Date",cell:s=>{const t=s.row.original;return e.jsx("span",{children:O.unix(t.date).format("DD/MM/YYYY")})}}),x.accessor("customer",{header:"Customer"}),x.accessor("totalAmount",{header:"Profile Progress",cell:s=>{const{totalAmount:t}=s.row.original;return e.jsx($,{displayType:"text",value:(Math.round(t*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})}});const{Tr:de,Td:me,TBody:ue,THead:pe,Th:he}=L,W=({data:s=[],className:t})=>{const a=v(),r=()=>{a("/mail/all")},d=o=>{a(`/pms/mail/${o}`)};return e.jsxs(N,{className:t,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{children:"Latest Messages"}),e.jsx(B,{size:"sm",onClick:r,children:"View All"})]}),s.map(o=>e.jsx("div",{className:"flex items-center justify-between rounded-md mb-2 p-2 hover:bg-gray-50 dark:hover:bg-gray-600/40 cursor-pointer user-select",onClick:()=>d(o.id),children:e.jsxs("div",{className:"flex items-center gap-3 sm:justify-between w-full",children:[e.jsx(T,{className:"mr-4",src:"/img/avatars/thumb-1.jpg"}),e.jsxs("div",{className:"w-full",children:[e.jsx("div",{className:"font-bold w-full truncate",children:o.name}),e.jsx("div",{className:"w-full truncate",children:o.subject})]}),e.jsx("div",{className:"hidden sm:block w-20 truncate",children:o.designation}),e.jsx("div",{className:"hidden sm:block",children:o.date})]})},o.id))]})},z=({data:s})=>{const t=v();if(!s)return e.jsx("div",{children:"Loading data..."});const a=[{data:s.final_form_a_progress,label:"EMPLOYEE CONTRACT",date:"01-01-2025 to 31-12-2025",route:"/departmentlist"},{data:s.final_form_b_progress,label:"QUATERLY APPRAISAL",date:"01-01-2025 to 31-12-2025",route:"/departmentlist"},{data:s.final_form_c_progress,label:"ANNUAL APPRAISAL",date:"01-01-2025 to 31-12-2025",route:"/departmentlist"}];return e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 lg:gap-4",children:a.map((r,d)=>e.jsx(N,{className:"cursor-pointer bg-[#018752]",onClick:()=>t(r.route),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"font-semibold mb-4 text-md text-white",children:r.label}),e.jsx("span",{className:"text-white",children:r.date||"No Date Provided"})]}),e.jsx("div",{children:e.jsx(J,{variant:"circle",percent:r.data||0,width:80})})]})},d))})},U=async s=>{try{return await S({url:`/dashboard?&year=${s}`,method:"get"})}catch(t){throw console.error("Error fetching information data:",t),t}},q=()=>{const[s,t]=c.useState(null),[a,r]=c.useState(!0),[d,o]=c.useState(null),n=i=>{const m=Object.values(i).map(l=>({department_name:l.department_name,overall:l.overall})).sort((l,j)=>j.overall-l.overall);return{series:[{name:"Department performance",data:m.map(l=>l.overall)}],categories:m.map(l=>l.department_name)}},h=async()=>{try{r(!0);const i=localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),m=await U(i);if(m&&m.data)t(m.data);else throw new Error("Invalid response data")}catch(i){console.error("Error fetching data:",i),o(i instanceof Error?i.message:"Failed to load data")}finally{r(!1)}};if(c.useEffect(()=>{h()},[]),a)return e.jsx(D,{loading:!0});if(d)return e.jsx("div",{className:"text-red-500 text-center p-4",children:e.jsx("p",{children:d})});const g=s!=null&&s.department_progress?n(s.department_progress):{series:[],categories:[]},f=[{id:"95954",date:"21/01/2025",name:"John Doe",email:"johndoe@example.com",subject:"Welcome to Our Service!",designation:"Staff",message:"Hi John, welcome aboard! Weâ€™re excited to have you with us.",image:"/img/avatars/thumb-1.jpg"},{id:"95423",date:"25/01/2025",name:"Jane Smith",email:"janesmith@example.com",subject:"Your Account Verification",designation:"Supervisor",message:"Dear Jane, please verify your account by clicking the link below.",image:"/img/avatars/thumb-2.jpg"}];return e.jsxs(D,{loading:a,children:[e.jsx(z,{data:s}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-4",children:e.jsx(H,{data:g,className:"col-span-2"})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-1 gap-4",children:e.jsx(W,{data:f,className:"lg:col-span-2"})})]})},Q=()=>e.jsx("div",{className:"lg:flex items-center justify-between mb-4 gap-3",children:e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h3",{children:"Dashboard"}),e.jsx("p",{children:"View PMS summary"})]})});function xe(){return e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsx(Q,{}),e.jsx(q,{})]})}export{xe as default};

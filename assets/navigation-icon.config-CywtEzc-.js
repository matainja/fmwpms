const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-Dn9YmvIe.js","assets/VerticalMenuContent-CESpTa87.js","assets/index-BKgot-QE.js","assets/index-COuxpkuE.css","assets/Upload-DBxu76QV.js","assets/Tag-F6RI2Cig.js","assets/Select-PfjRj-gd.js","assets/hoist-non-react-statics.cjs-YvBJCMz8.js","assets/Views-suHoSdbA.js","assets/toast-DpvE5zSK.js","assets/SidePanel-BSJWOpjm.js","assets/useResponsive-Bc60xwRK.js","assets/FormContainer-CrTrlfp0.js","assets/Department-Bo19SDjB.js"])))=>i.map(i=>d[i]);
import{r as y,n as Z,o as ee,j as e,c as H,H as te,u as C,k as se,_ as ae,N as ne,h as re,G as ie,a as oe,p as le,q as ce,t as de,L as pe,v as z,A as ue}from"./index-BKgot-QE.js";import{b as me,D as T}from"./Upload-DBxu76QV.js";import{w as J}from"./SidePanel-BSJWOpjm.js";import{g as he,h as fe,S as h,i as f,O as g,j as ge,k as ye,l as Y,m as xe,u as ve,n as je,o as Ne,p as we,q as be,r as Ce,s as Se,t as ke,v as Ee,w as Ae,x as Oe,y as Me}from"./Views-suHoSdbA.js";import{u as _e}from"./useResponsive-Bc60xwRK.js";import{D as Ie,A as V}from"./Tag-F6RI2Cig.js";import{B as G}from"./hoist-non-react-statics.cjs-YvBJCMz8.js";import"./FormContainer-CrTrlfp0.js";import{S as Te}from"./Select-PfjRj-gd.js";import{t as L,N as D}from"./toast-DpvE5zSK.js";import{d as Le,a as De,b as Ke}from"./Department-Bo19SDjB.js";const Pe=(t,s,n,r)=>{var a,d,j,m;const o=[n,{code:s,...r||{}}];if((d=(a=t==null?void 0:t.services)==null?void 0:a.logger)!=null&&d.forward)return t.services.logger.forward(o,"warn","react-i18next::",!0);I(o[0])&&(o[0]=`react-i18next:: ${o[0]}`),(m=(j=t==null?void 0:t.services)==null?void 0:j.logger)!=null&&m.warn?t.services.logger.warn(...o):console!=null&&console.warn&&console.warn(...o)},q={},U=(t,s,n,r)=>{I(n)&&q[n]||(I(n)&&(q[n]=new Date),Pe(t,s,n,r))},X=(t,s)=>()=>{if(t.isInitialized)s();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),s()};t.on("initialized",n)}},$=(t,s,n)=>{t.loadNamespaces(s,X(t,n))},W=(t,s,n,r)=>{if(I(n)&&(n=[n]),t.options.preload&&t.options.preload.indexOf(s)>-1)return $(t,n,r);n.forEach(o=>{t.options.ns.indexOf(o)<0&&t.options.ns.push(o)}),t.loadLanguages(s,X(t,r))},He=(t,s,n={})=>!s.languages||!s.languages.length?(U(s,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:s.languages}),!0):s.hasLoadedNamespace(t,{lng:n.lng,precheck:(r,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,t))return!1}}),I=t=>typeof t=="string",Re=t=>typeof t=="object"&&t!==null,Fe=y.createContext();class Ye{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const Ue=(t,s)=>{const n=y.useRef();return y.useEffect(()=>{n.current=t},[t,s]),n.current},Q=(t,s,n,r)=>t.getFixedT(s,n,r),$e=(t,s,n,r)=>y.useCallback(Q(t,s,n,r),[t,s,n,r]),ht=(t,s={})=>{var _,K,P,B;const{i18n:n}=s,{i18n:r,defaultNS:o}=y.useContext(Fe)||{},a=n||r||Z();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new Ye),!a){U(a,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const v=(k,E)=>I(E)?E:Re(E)&&I(E.defaultValue)?E.defaultValue:Array.isArray(k)?k[k.length-1]:k,S=[v,{},!1];return S.t=v,S.i18n={},S.ready=!1,S}(_=a.options.react)!=null&&_.wait&&U(a,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const d={...ee(),...a.options.react,...s},{useSuspense:j,keyPrefix:m}=d;let i=o||((K=a.options)==null?void 0:K.defaultNS);i=I(i)?[i]:i||["translation"],(B=(P=a.reportNamespaces).addUsedNamespaces)==null||B.call(P,i);const x=(a.isInitialized||a.initializedStoreOnce)&&i.every(v=>He(v,a,d)),A=$e(a,s.lng||null,d.nsMode==="fallback"?i:i[0],m),O=()=>A,l=()=>Q(a,s.lng||null,d.nsMode==="fallback"?i:i[0],m),[M,p]=y.useState(O);let b=i.join();s.lng&&(b=`${s.lng}${b}`);const u=Ue(b),c=y.useRef(!0);y.useEffect(()=>{const{bindI18n:v,bindI18nStore:S}=d;c.current=!0,!x&&!j&&(s.lng?W(a,s.lng,i,()=>{c.current&&p(l)}):$(a,i,()=>{c.current&&p(l)})),x&&u&&u!==b&&c.current&&p(l);const k=()=>{c.current&&p(l)};return v&&(a==null||a.on(v,k)),S&&(a==null||a.store.on(S,k)),()=>{c.current=!1,a&&v&&(v==null||v.split(" ").forEach(E=>a.off(E,k))),S&&a&&S.split(" ").forEach(E=>a.store.off(E,k))}},[a,b]),y.useEffect(()=>{c.current&&x&&p(O)},[a,m,x]);const w=[M,a,x];if(w.t=M,w.i18n=a,w.ready=x,x||!x&&!j)return w;throw new Promise(v=>{s.lng?W(a,s.lng,i,()=>v()):$(a,i,()=>v())})},ft=t=>{const{headerStart:s,headerEnd:n,headerMiddle:r,className:o,container:a}=t;return e.jsx("header",{className:H("header",o),children:e.jsxs("div",{className:H("header-wrapper",te,a&&"container mx-auto"),children:[e.jsx("div",{className:"header-action header-action-start",children:s}),r&&e.jsx("div",{className:"header-action header-action-middle",children:r}),e.jsx("div",{className:"header-action header-action-end",children:n})]})})},Be=({toggled:t,className:s})=>e.jsx("div",{className:s,children:t?e.jsx(he,{}):e.jsx(fe,{})}),F="title",R="collapse",N="item",ze=[{key:"apps",path:"",title:"APPS",translateKey:"nav.apps",icon:"apps",type:F,authority:[h,f,g],subMenu:[{key:"apps.pms",path:"",title:"PMS",translateKey:"nav.appspms.pms",icon:"pms",type:R,authority:[],subMenu:[{key:"appspms.dashboard",path:"/dashboard",title:"Dashboard",translateKey:"nav.appspms.dashboard",icon:"",type:N,authority:[h,f,g],subMenu:[]},{key:"apps.departmentList",path:"/departmentlist",title:"Department List",translateKey:"nav.appspms.departmentList",icon:"",type:N,authority:[h],subMenu:[]},{key:"apps.departmentListSupervisor",path:"/supervisor/departmentlist",title:"Department List",translateKey:"nav.appspms.departmentList",icon:"",type:N,authority:[f],subMenu:[]},{key:"apps.departmentListSupervisor",path:"/officer/departmentlist",title:"Department List",translateKey:"nav.appspms.departmentList",icon:"",type:N,authority:[g],subMenu:[]}]}]}],Ve=[{key:"aricle",path:"",title:"article",translateKey:"nav.article.article",icon:"article",type:F,authority:[h,f,g],subMenu:[{key:"pages.evidence",path:"",title:"Account",translateKey:"nav.pages.evidence",icon:"profile",type:R,authority:[h,f,g],subMenu:[{key:"pages.evidenceUpload",path:"/Upload-evidence",title:"Evidence",translateKey:"nav.pages.uploadEvidence",icon:"",type:N,authority:[h,f,g],subMenu:[]},{key:"pages.evidenceDetails",path:"/listofevidence",title:"Evidence",translateKey:"nav.pages.list_of_evidence",icon:"",type:N,authority:[h,f,g],subMenu:[]}]},{key:"aricle.knowledgeBase",path:"",title:"Knowledge Base",translateKey:"nav.articleKnowledgebase.knowledgeBase",icon:"knowledgeBase",type:R,authority:[h,f,g],subMenu:[{key:"articleKnowledgebase.article",path:"/faq",title:"Faq",translateKey:"nav.articleKnowledgebase.article",icon:"",type:N,authority:[h,f,g],subMenu:[]}]}]}],Ge=[{key:"form",path:"",title:"Forms",translateKey:"nav.forms.forms",icon:"forms",type:F,authority:[h,f,g],subMenu:[{key:"forms.form_appraisal",path:"",title:"Forms & Appraisal",translateKey:"nav.forms.form_appraisal",icon:"form_appraisal",type:R,authority:[h,f,g],subMenu:[{key:"forms.forms-A-staff",path:"/departmentlist",title:"View Forms",translateKey:"nav.forms.forms-A-staff",icon:"icon-a",type:N,authority:[h],subMenu:[]},{key:"forms.forms-A-supervisor",path:"/supervisor/departmentlist",title:"View Forms",translateKey:"nav.forms.forms-A-supervisor",icon:"icon-a",type:N,authority:[f],subMenu:[]},{key:"forms.forms-A-supervisor",path:"/officer/departmentlist",title:"View Forms",translateKey:"nav.forms.forms-A-supervisor",icon:"icon-a",type:N,authority:[g],subMenu:[]}]}]}],qe=[{key:"pages",path:"",title:"Pages",translateKey:"nav.pages.pages",icon:"pages",type:F,authority:[h,f,g],subMenu:[{key:"pages.account",path:"",title:"Account",translateKey:"nav.pages.account",icon:"Account",type:R,authority:[h,f,g],subMenu:[{key:"pages.profile",path:"/profile",title:"Profile",translateKey:"nav.pages.profile",icon:"",type:N,authority:[h,f,g],subMenu:[]}]},{key:"pages.messages",path:"/mail/inbox/all",title:"Messages",translateKey:"nav.pages.messages",icon:"messages",type:N,authority:[h,f,g],subMenu:[]}]}],We=[...ze,...Ge,...Ve,...qe],Je=y.lazy(()=>ae(()=>import("./index-Dn9YmvIe.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),Xe=J(Be),gt=()=>{const[t,s]=y.useState(!1),n=()=>{s(!0)},r=()=>{s(!1)},o=C(l=>l.theme.themeColor),a=C(l=>l.theme.primaryColorLevel),d=C(l=>l.theme.navMode),j=C(l=>l.theme.mode),m=C(l=>l.theme.direction),i=C(l=>l.base.common.currentRouteKey),x=C(l=>l.auth.user.role),{smaller:A}=_e(),O=()=>d===ne?`bg-${o}-${a} side-nav-${d}`:d===re?`side-nav-${j}`:`side-nav-${d}`;return e.jsx(e.Fragment,{children:A.md&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-2xl",onClick:n,children:e.jsx(Xe,{toggled:t})}),e.jsx(me,{title:"Navigation",isOpen:t,bodyClass:H(O(),"p-0"),width:330,placement:m===se?"right":"left",onClose:r,onRequestClose:r,children:e.jsx(y.Suspense,{fallback:e.jsx(e.Fragment,{}),children:t&&e.jsx(Je,{navMode:d,collapsed:!1,navigationTree:We,routeKey:i,userAuthority:x,direction:m,onMenuItemClick:r})})})]})})};function Qe(t){return ie({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"},child:[]}]})(t)}const Ze=async t=>{const s=ge();if(s===h)return await Le(t);if(s===f)return await De(t);if(s===g)return await Ke(t);throw new Error("Invalid role or unsupported role")},et=({isOpen:t,onClose:s})=>{const n=oe(),{years:r=[]}=C(p=>p.auth.user||{}),o=le(),[a,d]=y.useState(!1),[j,m]=y.useState(null),[i,x]=y.useState({value:"",label:""}),A=()=>localStorage.getItem("selectedYear")||new Date().getFullYear().toString(),O=r.map(p=>({label:String(p),value:String(p)}));y.useEffect(()=>{const p=A();x({value:p,label:p})},[]);const l=()=>{s()},M=async()=>{var p,b,u;if(!(i!=null&&i.value)){m("Please select a year.");return}d(!0),m(null);try{const c=await Ze(i.value);(c==null?void 0:c.status)===200&&(n(ce(((p=c==null?void 0:c.data)==null?void 0:p.department_details)||[])),L.push(e.jsxs(D,{title:"Success",type:"success",children:["Year ",i.value," loaded successfully!"]}),{placement:"top-center"}),localStorage.setItem("selectedYear",i.value.toString()),o("/welcome"))}catch(c){const w=((u=(b=c==null?void 0:c.response)==null?void 0:b.data)==null?void 0:u.message)||"Failed to fetch department details.";L.push(e.jsxs(D,{title:"No Data",type:"warning",children:[w," ",i.value,"."]}),{placement:"top-center"}),m(w);const _=new Date().getFullYear().toString();localStorage.setItem("selectedYear",_),x({value:_,label:_})}finally{d(!1),s()}};return e.jsx("div",{children:e.jsxs(Ie,{isOpen:t,shouldCloseOnOverlayClick:!1,shouldCloseOnEsc:!1,onClose:l,onRequestClose:l,children:[e.jsx("h5",{className:"mb-4",children:"Change Year"}),e.jsx(Te,{placeholder:"Please Select",options:O,value:i,isDisabled:a,onChange:p=>{p&&x(p)}}),e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(G,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",color:"red-600",disabled:a,onClick:l,children:"Cancel"}),e.jsx(G,{variant:"solid",loading:a,onClick:M,children:a?"Loading...":"Confirm"})]})]})})},tt=({className:t})=>{const{avatar:s,userName:n,role:r,email:o,roleStatus:a,years:d=[],previous_year:j,current_year:m}=C(u=>u.auth.user||{}),i=localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),[x,A]=y.useState(!1),{signOut:O,signIn:l}=de(),M=u=>{const c=sessionStorage.getItem("rememberMe");if(!c){L.push(e.jsx(D,{title:"Error",type:"danger",children:"No credentials found in local storage."}),{placement:"top-center"});return}try{const{email:w,password:_}=JSON.parse(c),K=z(w),P=z(_);if(!K||!P)throw new Error("Missing decrypted credentials.");l({email:K,password:P,role:u}).then(()=>{L.push(e.jsxs(D,{title:"Success",type:"success",children:["Switched role to"," ",u.charAt(0).toUpperCase()+u.slice(1),"."]}),{placement:"top-center"}),window.location.href="/welcome"}).catch(()=>{L.push(e.jsx(D,{title:"Error",type:"danger",children:"Failed to switch role. Please try again."}),{placement:"top-center"})})}catch{L.push(e.jsx(D,{title:"Error",type:"danger",children:"Invalid credentials stored or decryption failed."}),{placement:"top-center"})}},p=[{label:"Profile",path:"/profile",icon:e.jsx(ye,{})},r!=="staff"&&(a==null?void 0:a.is_staff)&&{label:"Login as Staff",icon:e.jsx(Y,{}),onClick:()=>M("staff")},r!=="supervisor"&&(a==null?void 0:a.is_supervisor)&&{label:"Login as Supervisor",icon:e.jsx(Y,{}),onClick:()=>M("supervisor")},r!=="officer"&&(a==null?void 0:a.is_officer)&&{label:"Login as Officer",icon:e.jsx(Y,{}),onClick:()=>M("officer")},{label:e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[m?e.jsx("span",{className:"text-black",children:i||"No year"}):e.jsx("span",{children:"Year freeze from admin"}),j&&m&&e.jsx("button",{className:"text-blue-500 hover:underline",onClick:()=>A(!0),children:"Switch Year"})]}),icon:e.jsx(Qe,{})}].filter(Boolean),b=e.jsxs("div",{className:H(t,"flex items-center gap-2"),children:[e.jsx(V,{size:32,shape:"circle",src:s||"/img/avatars/No_user.jpeg"}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("div",{className:"text-xs capitalize",children:r||"guest"}),e.jsx("div",{className:"font-bold",children:n})]})]});return e.jsxs("div",{children:[e.jsxs(T,{menuStyle:{minWidth:240},renderTitle:b,placement:"bottom-end",children:[e.jsx(T.Item,{variant:"header",children:e.jsxs("div",{className:"py-2 px-3 flex items-center gap-2",children:[e.jsx(V,{shape:"circle",src:s||"/img/avatars/No_user.jpeg"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-gray-900",children:n}),e.jsx("div",{className:"text-xs",children:o}),e.jsx("div",{className:"text-xs w-20 bg-green-800 text-white flex items-center justify-center rounded py-[1px] mt-1 uppercase",children:r})]})]})}),e.jsx(T.Item,{variant:"divider"}),p.filter(u=>!!u).map((u,c)=>e.jsx(T.Item,{className:"mb-1 px-0",onClick:u.onClick??void 0,children:u.path?e.jsx(pe,{className:"flex h-full w-full px-2",to:u.path,children:e.jsxs("span",{className:"flex gap-2 items-center w-full",children:[e.jsx("span",{className:"text-xl opacity-50",children:u.icon}),e.jsx("span",{children:u.label})]})}):e.jsxs("div",{className:"flex gap-2 items-center w-full px-2 cursor-pointer",children:[e.jsx("span",{className:"text-xl opacity-50",children:u.icon}),e.jsx("span",{children:u.label})]})},c)),e.jsx(T.Item,{variant:"divider"}),e.jsxs(T.Item,{eventKey:"Sign Out",className:"gap-2",onClick:O,children:[e.jsx("span",{className:"text-xl opacity-50",children:e.jsx(xe,{})}),e.jsx("span",{children:"Sign Out"})]})]}),e.jsx(et,{isOpen:x,years:d,onClose:()=>A(!1)})]})},yt=J(tt),st="/img/logo/",xt=t=>{const{type:s="full",mode:n="light",className:r,imgClass:o,style:a,logoWidth:d="auto"}=t,j=C(m=>m.theme.layout.sideNavCollapse);return e.jsx("div",{className:H(`logo ${j?"mb-8":""}`,r),style:{...a,width:d},children:e.jsx("img",{className:o,src:`${st}logo-${n}-${s}.png`,alt:`${ue} logo`})})},vt=t=>{const{userAuthority:s=[],authority:n=[],children:r}=t,o=ve(s,n);return e.jsx(e.Fragment,{children:o?r:null})},jt={apps:e.jsx(Me,{}),pms:e.jsx(Oe,{}),mpms:e.jsx(Ae,{}),systemSettings:e.jsx(Ee,{}),knowledgeBase:e.jsx(ke,{}),forms:e.jsx(Se,{}),form_appraisal:e.jsx(Ce,{}),pages:e.jsx(be,{}),Account:e.jsx(we,{}),messages:e.jsx(Ne,{}),profile:e.jsx(je,{})};export{vt as A,ft as H,Fe as I,xt as L,gt as M,Be as N,yt as U,N as a,jt as b,F as c,R as d,Pe as e,Re as f,I as i,We as n,ht as u,U as w};

import{a0 as w,r as o,j as e,p as b,u as v,W as N}from"./index-CdvnMJDF.js";import"./FormContainer-grfML9lp.js";import{C as j,a as D,b as f}from"./Tag-CxkAlyD2.js";import{B as y}from"./hoist-non-react-statics.cjs-sUaFkZ5N.js";import{P as S,b as T}from"./Upload-BfnOvjia.js";import"./Select-DZj4XGu3.js";import"./toast-BcWTRMKr.js";import{n as _}from"./not_user-D__Z_M0H.js";import"./Views-CxF1MRNz.js";async function I(i){try{const a=(await w({url:`/department/team_preview/${i}`,method:"get"})).data;return console.log(a),a}catch(t){throw console.error("Error making API request:",t),t}}const L=({team_name:i,team_description:t,team_status:a,team_progressive:n})=>{const[r,l]=o.useState(!1),s=t.split(" "),c=s.length>50,m=r?t:s.slice(0,50).join(" ")+(c?"...":""),d=()=>{l(h=>!h)};return e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(j,{className:"md:col-span-2 bg-[#018752]",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-xl font-semibold text-white break-all",children:i}),e.jsx(D,{className:`text-white ${a==="1"?"bg-green-600":"bg-gray-500"}`,children:a==="1"?"Active":"Inactive"})]}),e.jsxs("p",{className:"mt-4 text-white break-all",children:[m," ",c&&e.jsx("button",{className:"underline text-sm ml-2 focus:outline-none",onClick:d,children:r?"See less":"See more"})]})]})}),e.jsx(j,{className:"bg-[#018752]",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-white",children:"Progression"}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(S,{variant:"circle",percent:n,width:100,strokeWidth:4,"aria-label":`Progress: ${n}%`})})]})})]})},A=({departments:i})=>{const[t,a]=o.useState(null),[n,r]=o.useState(window.innerWidth<=1024);o.useEffect(()=>{const s=()=>{r(window.innerWidth<=1024)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const l=s=>{a(s)};return e.jsxs("div",{className:"my-4 px-2",children:[e.jsx("h5",{className:"text-xl font-bold mb-4 text-gray-800",children:"Associated Department List"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map(s=>{const c=s.name.split(" ").slice(0,5).join(" "),d=s.description.split(" ").slice(0,15).join(" ");return e.jsxs(j,{className:"bg-[#018752] rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 ease-in-out border border-gray-200",children:[e.jsx("h5",{className:"text-xl font-semibold text-white mb-2",children:c}),e.jsxs("p",{className:"text-white text-sm",children:[d,"...",e.jsx("button",{className:"text-blue-400 hover:underline ml-1",onClick:()=>l(s),children:"View All"})]})]},s.department_id)})}),t&&e.jsx(T,{title:"Department Details",isOpen:!!t,placement:"right",width:n?"100%":600,onClose:()=>l(null),children:e.jsxs("div",{className:"p-6 bg-gray-100 rounded-md shadow-md",children:[e.jsx("h6",{className:"text-xl font-bold text-gray-800",children:t.name}),e.jsx("p",{className:"mt-3 text-gray-600 leading-relaxed",children:t.description})]})})]})},{Tr:u,Th:p,Td:g,THead:P,TBody:k}=f,C=({assignStaffs:i})=>{const t=b(),{staff_id:a}=v(s=>s.auth.user||{}),n=localStorage.getItem("selectedTeamID")||"",r=N(n),l=s=>{s===a&&t(`/formList/${r}`)};return e.jsxs("div",{className:"my-6",children:[e.jsx("h5",{className:"text-lg font-semibold",children:"User List"}),e.jsxs(f,{compact:!0,className:"mt-4",children:[e.jsx(P,{children:e.jsxs(u,{children:[e.jsx(p,{children:"Name"}),e.jsx(p,{children:"Role"}),e.jsx(p,{children:"Action"})]})}),e.jsx(k,{children:i.map(s=>e.jsxs(u,{children:[e.jsx(g,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.image||_,alt:s.name||"User Avatar",className:"w-10 h-10 rounded-full"}),e.jsx("span",{children:s.name})]})}),e.jsx(g,{children:s.role}),e.jsx(g,{children:e.jsx(y,{variant:"solid",disabled:s.staff_id!==a,onClick:()=>l(s.staff_id),children:"View Form"})})]},s.staff_id))})]})]})},U=()=>{const[i,t]=o.useState(null),[a,n]=o.useState(!0),r=localStorage.getItem("selectedTeamID");if(o.useEffect(()=>{(async()=>{if(r)try{const x=await I(r);t(x)}catch(x){console.error("Failed to fetch team details:",x)}finally{n(!1)}else console.warn("No team ID found in local storage."),n(!1)})()},[r]),a)return e.jsx("p",{children:"Loading..."});if(!i)return e.jsx("p",{children:"No team details available."});const{team_name:l,team_description:s,team_status:c,team_progressive:m,team_department:d,team_assign_staffs:h}=i;return e.jsxs("div",{children:[e.jsx(L,{team_name:l,team_description:s,team_status:c,team_progressive:m}),e.jsx(A,{departments:d}),e.jsx(C,{assignStaffs:h})]})};export{U as default};

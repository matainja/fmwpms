import{Q as ie,n as le,o as xe,r as b,T as je,U as ge,j as i,L as U,V as Q}from"./index-CdvnMJDF.js";import{M as H,D as Z}from"./Upload-BfnOvjia.js";import{w as oe,i as w,e as W,f as P,I as Ee,b as be,A as V,u as ce,a as Ae,d as ke,c as Ie}from"./navigation-icon.config-bWK19jhF.js";import{T as Oe}from"./Tag-CxkAlyD2.js";import{r as $e}from"./Select-DZj4XGu3.js";var Y,v;function Ce(){return v||(v=1,Y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Y}var Me=Ce();const Te=ie(Me);var Ke=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function ee(e){var t={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=e.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(t.name=r[1],(Te[r[1]]||e.charAt(e.length-2)==="/")&&(t.voidElement=!0),t.name.startsWith("!--"))){var n=e.indexOf("-->");return{type:"comment",comment:n!==-1?e.slice(4,n):""}}for(var a=new RegExp(Ke),s=null;(s=a.exec(e))!==null;)if(s[0].trim())if(s[1]){var u=s[1].trim(),p=[u,""];u.indexOf("=")>-1&&(p=u.split("=")),t.attrs[p[0]]=p[1],a.lastIndex--}else s[2]&&(t.attrs[s[2]]=s[3].trim().substring(1,s[3].length-1));return t}var Pe=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,Ve=/^\s*$/,_e=Object.create(null);function ue(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?(function(r){var n=[];for(var a in r)n.push(a+'="'+r[a]+'"');return n.length?" "+n.join(" "):""})(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(ue,"")+"</"+t.name+">";case"comment":return e+"<!--"+t.comment+"-->"}}var Ne={parse:function(e,t){t||(t={}),t.components||(t.components=_e);var r,n=[],a=[],s=-1,u=!1;if(e.indexOf("<")!==0){var p=e.indexOf("<");n.push({type:"text",content:p===-1?e:e.substring(0,p)})}return e.replace(Pe,function(y,j){if(u){if(y!=="</"+r.name+">")return;u=!1}var m,c=y.charAt(1)!=="/",d=y.startsWith("<!--"),g=j+y.length,l=e.charAt(g);if(d){var A=ee(y);return s<0?(n.push(A),n):((m=a[s]).children.push(A),n)}if(c&&(s++,(r=ee(y)).type==="tag"&&t.components[r.name]&&(r.type="component",u=!0),r.voidElement||u||!l||l==="<"||r.children.push({type:"text",content:e.slice(g,e.indexOf("<",g))}),s===0&&n.push(r),(m=a[s-1])&&m.children.push(r),a[s]=r),(!c||r.voidElement)&&(s>-1&&(r.voidElement||r.name===y.slice(2,-1))&&(s--,r=s===-1?n:a[s]),!u&&l!=="<"&&l)){m=s===-1?n:a[s].children;var E=e.indexOf("<",g),f=e.slice(g,E===-1?void 0:E);Ve.test(f)&&(f=" "),(E>-1&&s+m.length>=0||f!==" ")&&m.push({type:"text",content:f})}}),n},stringify:function(e){return e.reduce(function(t,r){return t+ue("",r)},"")}};const G=(e,t)=>{var n;if(!e)return!1;const r=((n=e.props)==null?void 0:n.children)??e.children;return t?r.length>0:!!r},z=e=>{var r,n;if(!e)return[];const t=((r=e.props)==null?void 0:r.children)??e.children;return(n=e.props)!=null&&n.i18nIsDynamicList?N(t):t},Se=e=>Array.isArray(e)&&e.every(b.isValidElement),N=e=>Array.isArray(e)?e:[e],Le=(e,t)=>{const r={...t};return r.props=Object.assign(e.props,t.props),r},pe=(e,t,r,n)=>{if(!e)return"";let a="";const s=N(e),u=t!=null&&t.transSupportBasicHtmlNodes?t.transKeepBasicHtmlNodesFor??[]:[];return s.forEach((p,y)=>{if(w(p)){a+=`${p}`;return}if(b.isValidElement(p)){const{props:j,type:m}=p,c=Object.keys(j).length,d=u.indexOf(m)>-1,g=j.children;if(!g&&d&&!c){a+=`<${m}/>`;return}if(!g&&(!d||c)||j.i18nIsDynamicList){a+=`<${y}></${y}>`;return}if(d&&c===1&&w(g)){a+=`<${m}>${g}</${m}>`;return}const l=pe(g,t,r,n);a+=`<${y}>${l}</${y}>`;return}if(p===null){W(r,"TRANS_NULL_VALUE","Passed in a null value as child",{i18nKey:n});return}if(P(p)){const{format:j,...m}=p,c=Object.keys(m);if(c.length===1){const d=j?`${c[0]}, ${j}`:c[0];a+=`{{${d}}}`;return}W(r,"TRANS_INVALID_OBJ","Invalid child - Object should only have keys {{ value, format }} (format is optional).",{i18nKey:n,child:p});return}W(r,"TRANS_INVALID_VAR","Passed in a variable like {number} - pass variables for interpolation as full objects like {{number}}.",{i18nKey:n,child:p})}),a},De=(e,t,r,n,a,s,u)=>{if(r==="")return[];const p=a.transKeepBasicHtmlNodesFor||[],y=r&&new RegExp(p.map(f=>`<${f}`).join("|")).test(r);if(!e&&!t&&!y&&!u)return[r];const j=t??{},m=f=>{N(f).forEach(h=>{w(h)||(G(h)?m(z(h)):P(h)&&!b.isValidElement(h)&&Object.assign(j,h))})};m(e);const c=Ne.parse(`<0>${r}</0>`),d={...j,...s},g=(f,O,h)=>{var x;const $=z(f),T=A($,O.children,h);return Se($)&&T.length===0||(x=f.props)!=null&&x.i18nIsDynamicList?$:T},l=(f,O,h,$,T)=>{f.dummy?(f.children=O,h.push(b.cloneElement(f,{key:$},T?void 0:O))):h.push(...b.Children.map([f],x=>{const o={...x.props};return delete o.i18nIsDynamicList,b.createElement(x.type,{...o,key:$,ref:x.props.ref??x.ref},T?null:O)}))},A=(f,O,h)=>{const $=N(f);return N(O).reduce((x,o,M)=>{var L,D;const K=((D=(L=o.children)==null?void 0:L[0])==null?void 0:D.content)&&n.services.interpolator.interpolate(o.children[0].content,d,n.language);if(o.type==="tag"){let C=$[parseInt(o.name,10)];!C&&t&&(C=t[o.name]),h.length===1&&!C&&(C=h[0][o.name]),C||(C={});const k=Object.keys(o.attrs).length!==0?Le({props:o.attrs},C):C,_=b.isValidElement(k),F=_&&G(o,!0)&&!o.voidElement,q=y&&P(k)&&k.dummy&&!_,B=P(t)&&Object.hasOwnProperty.call(t,o.name);if(w(k)){const I=n.services.interpolator.interpolate(k,d,n.language);x.push(I)}else if(G(k)||F){const I=g(k,o,h);l(k,I,x,M)}else if(q){const I=A($,o.children,h);l(k,I,x,M)}else if(Number.isNaN(parseFloat(o.name)))if(B){const I=g(k,o,h);l(k,I,x,M,o.voidElement)}else if(a.transSupportBasicHtmlNodes&&p.indexOf(o.name)>-1)if(o.voidElement)x.push(b.createElement(o.name,{key:`${o.name}-${M}`}));else{const I=A($,o.children,h);x.push(b.createElement(o.name,{key:`${o.name}-${M}`},I))}else if(o.voidElement)x.push(`<${o.name} />`);else{const I=A($,o.children,h);x.push(`<${o.name}>${I}</${o.name}>`)}else if(P(k)&&!_){const I=o.children[0]?K:null;I&&x.push(I)}else l(k,K,x,M,o.children.length!==1||!K)}else if(o.type==="text"){const C=a.transWrapTextNodes,k=u?a.unescape(n.services.interpolator.interpolate(o.content,d,n.language)):n.services.interpolator.interpolate(o.content,d,n.language);C?x.push(b.createElement(C,{key:`${o.name}-${M}`},k)):x.push(k)}return x},[])},E=A([{dummy:!0,children:e||[]}],c,N(e||[]));return z(E[0])},fe=(e,t,r)=>{const n=e.key||t,a=b.cloneElement(e,{key:n});if(!a.props||!a.props.children||r.indexOf(`${t}/>`)<0&&r.indexOf(`${t} />`)<0)return a;function s(){return b.createElement(b.Fragment,null,a)}return b.createElement(s,{key:n})},we=(e,t)=>e.map((r,n)=>fe(r,n,t)),Fe=(e,t)=>{const r={};return Object.keys(e).forEach(n=>{Object.assign(r,{[n]:fe(e[n],n,t)})}),r},qe=(e,t,r,n)=>e?Array.isArray(e)?we(e,t):P(e)?Fe(e,t):(oe(r,"TRANS_INVALID_COMPONENTS",'<Trans /> "components" prop expects an object or array',{i18nKey:n}),null):null,Be=e=>!P(e)||Array.isArray(e)?!1:Object.keys(e).reduce((t,r)=>t&&Number.isNaN(Number.parseFloat(r)),!0);function He({children:e,count:t,parent:r,i18nKey:n,context:a,tOptions:s={},values:u,defaults:p,components:y,ns:j,i18n:m,t:c,shouldUnescape:d,...g}){var _,F,q,B,I,X;const l=m||le();if(!l)return oe(l,"NO_I18NEXT_INSTANCE","Trans: You need to pass in an i18next instance using i18nextReactModule",{i18nKey:n}),e;const A=c||l.t.bind(l)||(de=>de),E={...xe(),...(_=l.options)==null?void 0:_.react};let f=j||A.ns||((F=l.options)==null?void 0:F.defaultNS);f=w(f)?[f]:f||["translation"];const O=pe(e,E,l,n),h=p||O||E.transEmptyNodeValue||n,{hashTransKey:$}=E,T=n||($?$(O||h):O||h);(B=(q=l.options)==null?void 0:q.interpolation)!=null&&B.defaultVariables&&(u=u&&Object.keys(u).length>0?{...u,...l.options.interpolation.defaultVariables}:{...l.options.interpolation.defaultVariables});const x=u||t!==void 0&&!((X=(I=l.options)==null?void 0:I.interpolation)!=null&&X.alwaysFormat)||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},o={...s,context:a||s.context,count:t,...u,...x,defaultValue:h,ns:f},M=T?A(T,o):h,K=qe(y,M,l,n);let L=K||e,D=null;Be(K)&&(D=K,L=e);const C=De(L,D,M,l,E,o,d),k=r??E.defaultTransParent;return k?b.createElement(k,g,C):C}function S({children:e,count:t,parent:r,i18nKey:n,context:a,tOptions:s={},values:u,defaults:p,components:y,ns:j,i18n:m,t:c,shouldUnescape:d,...g}){var O;const{i18n:l,defaultNS:A}=b.useContext(Ee)||{},E=m||l||le(),f=c||(E==null?void 0:E.t.bind(E));return He({children:e,count:t,parent:r,i18nKey:n,context:a,tOptions:s,values:u,defaults:p,components:y,ns:j||(f==null?void 0:f.ns)||A||((O=E==null?void 0:E.options)==null?void 0:O.defaultNS),i18n:E,t:c,shouldUnescape:d,...g})}var J,te;function Re(){if(te)return J;te=1;var e=je(),t=$e(),r=ge(),n="[object Object]",a=Function.prototype,s=Object.prototype,u=a.toString,p=s.hasOwnProperty,y=u.call(Object);function j(m){if(!r(m)||e(m)!=n)return!1;var c=t(m);if(c===null)return!0;var d=p.call(c,"constructor")&&c.constructor;return typeof d=="function"&&d instanceof d&&u.call(d)==y}return J=j,J}var We=Re();const Ye=ie(We),R=({icon:e,gutter:t})=>typeof e!="string"&&!e?i.jsx(i.Fragment,{}):i.jsx("span",{className:`text-2xl ${t?"ltr:mr-2 rtl:ml-2":""}`,children:be[e]});R.defaultProps={gutter:!0};const{MenuItem:Ge}=H,ze=({title:e,translateKey:t,children:r,direction:n})=>{const{t:a}=ce();return i.jsx(Oe,{title:a(t)||e,placement:n==="rtl"?"left":"right",children:r})},re=e=>{const{nav:t,onLinkClick:r,sideCollapsed:n,userAuthority:a}=e;return i.jsx(V,{userAuthority:a,authority:t.authority,children:i.jsx(Ge,{eventKey:t.key,className:"mb-2",children:i.jsxs(U,{to:t.path,className:"flex items-center gap-2 h-full w-full",target:t.isExternalLink?"_blank":"",onClick:()=>r==null?void 0:r({key:t.key,title:t.title,path:t.path}),children:[i.jsx(R,{icon:t.icon}),!n&&i.jsx("span",{children:i.jsx(S,{i18nKey:t.translateKey,defaults:t.title})})]})},t.key)})},ne=({nav:e,onLinkClick:t,sideCollapsed:r,userAuthority:n,direction:a})=>i.jsx(V,{userAuthority:n,authority:e.authority,children:r?i.jsx(ze,{title:e.title,translateKey:e.translateKey,direction:a,children:i.jsx(re,{nav:e,sideCollapsed:r,userAuthority:n,onLinkClick:t})}):i.jsx(re,{nav:e,sideCollapsed:r,userAuthority:n,onLinkClick:t})}),{MenuItem:me,MenuCollapse:Je}=H,Ue=({nav:e,onLinkClick:t,userAuthority:r})=>i.jsx(V,{userAuthority:r,authority:e.authority,children:i.jsx(Je,{label:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(R,{icon:e.icon}),i.jsx("span",{children:i.jsx(S,{i18nKey:e.translateKey,defaults:e.title})})]}),eventKey:e.key,expanded:!1,className:"mb-2",children:e.subMenu.map(n=>i.jsx(V,{userAuthority:r,authority:n.authority,children:i.jsx(me,{eventKey:n.key,children:n.path?i.jsx(U,{className:"h-full w-full flex items-center",to:n.path,target:n.isExternalLink?"_blank":"",onClick:()=>t==null?void 0:t({key:n.key,title:n.title,path:n.path}),children:i.jsx("span",{children:i.jsx(S,{i18nKey:n.translateKey,defaults:n.title})})}):i.jsx("span",{children:i.jsx(S,{i18nKey:n.translateKey,defaults:n.title})})})},n.key))},e.key)}),Xe=({nav:e,onLinkClick:t,userAuthority:r,direction:n})=>{const a=i.jsx(me,{eventKey:e.key,className:"mb-2",children:i.jsx(R,{icon:e.icon})},e.key);return i.jsx(V,{userAuthority:r,authority:e.authority,children:i.jsx(Z,{trigger:"hover",renderTitle:a,placement:n==="rtl"?"middle-end-top":"middle-start-top",children:e.subMenu.map(s=>i.jsx(V,{userAuthority:r,authority:s.authority,children:i.jsx(Z.Item,{eventKey:s.key,children:s.path?i.jsx(U,{className:"h-full w-full flex items-center",to:s.path,target:s.isExternalLink?"_blank":"",onClick:()=>t==null?void 0:t({key:s.key,title:s.title,path:s.path}),children:i.jsx("span",{children:i.jsx(S,{i18nKey:s.translateKey,defaults:s.title})})}):i.jsx("span",{children:i.jsx(S,{i18nKey:s.translateKey,defaults:s.title})})})},s.key))})})},se=({sideCollapsed:e,...t})=>e?i.jsx(Xe,{...t}):i.jsx(Ue,{...t}),he=(e,t)=>{if(!Array.isArray(e)&&e.key===t)return e;let r,n=!1;for(const a in e)if(a!=="icon"&&e.hasOwnProperty(a)&&typeof e[a]=="object"&&(Ye(e[a])&&e[a].subMenu.length>0&&e[a].subMenu.some(s=>s.key===t)&&(n=!0),r=he(e[a],t),r))return n&&(r.parentKey=e[a].key),r;return r},ye=(e,t)=>e.find(n=>n.key===t)?!0:e.some(n=>ye(n.subMenu,t)),Qe=(e,t)=>{let r={};return e.forEach(n=>{ye([n],t)&&(r=n)}),r};function Ze(e,t){const r=b.useMemo(()=>he(e,t),[e,t]),n=b.useMemo(()=>Qe(e,t),[e,t]);return{activedRoute:r,includedRouteTree:n}}const{MenuGroup:ae}=H,st=e=>{const{navMode:t=Q.navMode,collapsed:r,routeKey:n,navigationTree:a=[],userAuthority:s=[],onMenuItemClick:u,direction:p=Q.direction}=e,{t:y}=ce(),[j,m]=b.useState([]),{activedRoute:c}=Ze(a,n);b.useEffect(()=>{j.length===0&&(c!=null&&c.parentKey)&&m([c==null?void 0:c.parentKey])},[c==null?void 0:c.parentKey]);const d=()=>{u==null||u()},g=l=>{if(l.subMenu.length===0&&l.type===Ae)return i.jsx(ne,{nav:l,sideCollapsed:r,userAuthority:s,direction:p,onLinkClick:d},l.key);if(l.subMenu.length>0&&l.type===ke)return i.jsx(se,{nav:l,sideCollapsed:r,userAuthority:s,direction:p,onLinkClick:u},l.key);if(l.type===Ie){if(l.subMenu.length>0)return i.jsx(V,{userAuthority:s,authority:l.authority,children:i.jsx(ae,{label:y(l.translateKey)||l.title,children:l.subMenu.map(A=>A.subMenu.length>0?i.jsx(se,{nav:A,sideCollapsed:r,userAuthority:s,direction:p,onLinkClick:u},A.key):i.jsx(ne,{nav:A,sideCollapsed:r,userAuthority:s,direction:p,onLinkClick:u},A.key))})},l.key);l.title}};return i.jsx(H,{className:"px-4 pb-4",variant:t,sideCollapsed:r,defaultActiveKeys:c!=null&&c.key?[c.key]:[],defaultExpandedKeys:j,children:a.map(l=>g(l))})};export{st as V,Ze as u};

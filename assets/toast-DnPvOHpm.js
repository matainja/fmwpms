import{r as o,c as y,j as c,ag as R,aq as S}from"./index-CdXcW46_.js";import{d as W,S as D,C as B,m as _}from"./hoist-non-react-statics.cjs-BYdDfNAW.js";function F(...e){return e.filter(t=>t!==null&&typeof t<"u").reduce((t,n)=>{if(typeof n!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===void 0?n:function(...i){t.apply(this,i),n.apply(this,i)}},void 0)}const O=o.forwardRef((e,t)=>{const{className:n,children:a,closable:i=!1,customIcon:l,duration:d=3e3,onClose:s,style:r,title:p,triggerByToast:m,type:f,width:j=350,...N}=e,[C,v]=o.useState("show"),{clear:x}=W(s,d,d>0),k=o.useCallback(T=>{v("hiding"),s==null||s(T),x(),m||setTimeout(()=>{v("hide")},400)},[s,x,m]),u=y("notification",n);return C==="hide"?null:c.jsxs("div",{ref:t,...N,className:u,style:{width:j,...r},children:[c.jsxs("div",{className:y("notification-content",!a&&"no-child"),children:[f&&!l?c.jsx("div",{className:"mr-3",children:c.jsx(D,{type:f})}):null,l&&c.jsx("div",{className:"mr-3",children:l}),c.jsxs("div",{className:"mr-4",children:[p&&c.jsx("div",{className:y("notification-title",a&&"mb-1"),children:p}),c.jsx("div",{className:"notification-description",children:a})]})]}),i&&c.jsx(B,{className:"notification-close",defaultStyle:!1,absolute:!0,onClick:k})]})});O.displayName="Notification";const q=({offsetX:e,offsetY:t,placement:n,transitionType:a})=>a==="fade"?H(e,t)[n]:z(e,t)[n],h={initial:{opacity:0,transform:"scale(0.75)"},animate:{transform:"scale(1)",opacity:1},exit:{opacity:0,transform:"scale(0.75)"}},b={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},z=(e,t)=>({"top-end":{default:{top:t,right:e},variants:{...h}},"top-start":{default:{top:t,left:e},variants:{...h}},"top-center":{default:{top:t,left:"50%",transform:"translateX(-50%)"},variants:{...h}},"bottom-end":{default:{bottom:t,right:e},variants:{...h}},"bottom-start":{default:{bottom:t,left:e},variants:{...h}},"bottom-center":{default:{bottom:t,left:"50%",transform:"translateX(-50%)"},variants:{...h}}}),H=(e,t)=>({"top-end":{default:{top:t,right:e},variants:{...b}},"top-start":{default:{top:t,left:e},variants:{...b}},"top-center":{default:{top:t,left:"50%",transform:"translateX(-50%)"},variants:{...b}},"bottom-end":{default:{bottom:t,right:e},variants:{...b}},"bottom-start":{default:{bottom:t,left:e},variants:{...b}},"bottom-center":{default:{bottom:t,left:"50%",transform:"translateX(-50%)"},variants:{...b}}}),K=e=>{const[t,n]=o.useState([]),a=o.useCallback(s=>(typeof s>"u"&&t.length&&(s=t[t.length-1].key),s),[t]),i=o.useCallback(s=>{const r=e||"_"+Math.random().toString(36).substr(2,12);return n([...t,{key:r,visible:!0,node:s}]),r},[t,e]),l=o.useCallback(()=>{n(t.map(s=>({...s,visible:!1}))),setTimeout(()=>{n([])},50)},[t]),d=o.useCallback(s=>{n(t.map(r=>(r.key===a(s)&&(r.visible=!1),r))),setTimeout(()=>{n(t.filter(r=>r.visible))},50)},[t,a]);return{messages:t,push:i,removeAll:l,remove:d}},w=o.forwardRef((e,t)=>{const n=o.useRef(null),{transitionType:a="scale",placement:i=R.TOP_END,offsetX:l=30,offsetY:d=30,messageKey:s,block:r=!1,callback:p,...m}=e,{push:f,removeAll:j,remove:N,messages:C}=K(s);o.useImperativeHandle(t,()=>({root:n.current,push:f,removeAll:j,remove:N}));const v=q({offsetX:l,offsetY:d,placement:i,transitionType:a}),x={triggerByToast:!0,...m},k=C.map(u=>{var T,P,I,M;return c.jsx(_.div,{className:"toast-wrapper",initial:v.variants.initial,variants:v.variants,animate:u.visible?"animate":"exit",transition:{duration:.15,type:"tween"},children:o.cloneElement(u.node,{...x,ref:t,onClose:F((P=(T=u.node)==null?void 0:T.props)==null?void 0:P.onClose,()=>N(u.key)),className:y((M=(I=u.node)==null?void 0:I.props)==null?void 0:M.className)})},u.key)});return c.jsx("div",{style:v.default,...m,ref:u=>{n.current=u,p==null||p(u)},className:y("toast",r&&"w-full"),children:k})});w.getInstance=e=>{const{wrapper:t,...n}=e,a=o.createRef(),i=(typeof t=="function"?t():t)||document.body;return new Promise(l=>{const d=()=>{l([a,r])};function s(p){const m=document.createElement("div");i.appendChild(m);const f=S.createRoot(m);return f.render(p),f}const{unmount:r}=s(c.jsx(w,{...n,ref:a,callback:d}))})};w.displayName="ToastWrapper";const L={placement:R.TOP_END,offsetX:30,offsetY:30,transitionType:"scale",block:!1},A="default",g=new Map;function G(e){if(/\top\b/.test(e))return"top-full";if(/\bottom\b/.test(e))return"bottom-full"}async function J(e,t){const[n]=await w.getInstance(t);return g.set(e||A,n),n}function Q(e){return g.size===0?null:g.get(e||A)}const E=e=>E.push(e);E.push=(e,t=L)=>{let n=t.placement;t.block&&(n=G(t.placement));const a=Q(n);return a!=null&&a.current?a.current.push(e):J(n??"",t).then(i=>{var l;return(l=i.current)==null?void 0:l.push(e)})};E.remove=e=>{g.forEach(t=>t.current.remove(e))};E.removeAll=()=>{g.forEach(e=>e.current.removeAll())};export{O as N,F as c,E as t};

import{j as e,a0 as E,$ as C,u as Y,r as i,J as M}from"./index-CeEe7pb3.js";import"./FormContainer-ke5PD8DU.js";import{b as H,c as $,d as F,e as g,f as z,g as N}from"./Tag-DNSi-sYK.js";import{I as P,B}from"./hoist-non-react-statics.cjs-vQel0rgr.js";import{e as k}from"./Upload-Yey7eInk.js";import"./Select-CZx5-JQ3.js";import{t as O,N as R}from"./toast-1uGxBegS.js";import"./SvgIcon-eCFWFgY_.js";import"./Views-DRQ2IpiN.js";import"./index-BJgCRTmY.js";import"./quill.snow-DfnqP1HH.js";import"./cloneDeep-DznBgb_t.js";import"./useThemeClass-Cc4C5g-n.js";const G=()=>e.jsx("div",{className:"flex justify-between items-start border-2 rounded-lg p-8",children:e.jsxs("div",{className:"font-light",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"What is the IDPF Form?"}),e.jsxs("p",{className:"text-sm  text-gray-700 leading-relaxed",children:["The"," ",e.jsx("span",{className:"font-medium",children:"Personal Development Plan Form (IDPF)"})," ","is one of the Performance Management templates designed to support and enhance professional growth during the performance period. It is completed after necessary discussions and agreements between the"," ",e.jsx("span",{className:"font-medium",children:"appraisee"})," and the"," ",e.jsx("span",{className:"font-medium",children:"appraiser"}),"."]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-700 leading-relaxed",children:[e.jsx("p",{className:"mb-1 font-semibold",children:"The IDPF helps in:"}),e.jsxs("ol",{type:"a",className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Identifying and pursuing your personal goals for professional development"}),e.jsx("li",{children:"Setting goals to learn or improve on key competencies you will need now or in the future"}),e.jsx("li",{children:"Recognizing your strengths, talents, and passions and planning ways to apply them at work"})]})]})]})}),U=()=>e.jsxs("div",{className:"p-36 border-2 rounded-lg shadow-sm bg-white w-full max-w-4xl",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Appraisal Period Covered"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["1st January 2024"," to ","31st December 2024"]})]}),W=({hrInfo:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 bg-green-700 rounded-lg shadow-md mb-4",children:e.jsx("h4",{className:"text-white font-semibold text-sm",children:"FOR USE ONLY BY THE HUMAN RESOURCE DEPARTMENT"})}),e.jsx("div",{className:"p-3 border-2 rounded-lg shadow-sm bg-white w-full mb-4",children:e.jsxs("div",{className:"flex flex-col text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-extrabold",children:["HR's Comment:"," "]}),a.comment||"N/A"]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-extrabold",children:"Date of Receipt in HR's Dept.:"})," ",a.date?new Date(a.date).toLocaleDateString():"N/A"]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-extrabold",children:"HR's Name: "}),a.name||"N/A"]}),e.jsxs("p",{className:"mt-1",children:[e.jsxs("span",{className:"font-extrabold",children:["HR's Declaration:"," "]}),a.declaration===0?"Approved":a.declaration===1?"Rejected":"N/A"]})]})})]}),q=async(a,s,t,l)=>{try{return await E({url:`supervisor/idpf?department_id=${a}&team_id=${s}&year=${t} &staff_id=${l}`,method:"get"})}catch(n){throw console.error("Error fetching information data:",n),n}},J=async(a,s,t,l)=>{try{return await E({url:`supervisor/idpf_comments?department_id=${a}&team_id=${s}&year=${t} &staff_id=${l}`,method:"get"})}catch(n){throw console.error("Error fetching information data:",n),n}},V=async a=>{try{return await E({url:"/supervisor/idpf_comments",method:"post",data:a})}catch(s){throw console.error("Error fetching information data:",s),s}},K=()=>{const{id:a}=C(),{userName:s}=Y(d=>d.auth.user||{}),[t,l]=i.useState({comment:"",name:"",declaration:"",date:null}),[n,x]=i.useState({comment:"",name:"",declaration:-1,date:null}),[p,j]=i.useState(null),[w,b]=i.useState(!1),[u,D]=i.useState(""),I=async()=>{var d,o,m,c,h,T;b(!0);try{const v=localStorage.getItem("selectedDepartmentID")||"",_=localStorage.getItem("selectedTeamID"),L=localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),A=await J(v,_?Number(_):null,L,String(a)),r=(d=A==null?void 0:A.data)==null?void 0:d.comments;if(r)l({comment:((o=r.supervisor)==null?void 0:o.comment)||"",name:((m=r.supervisor)==null?void 0:m.name)||"",declaration:((h=(c=r.supervisor)==null?void 0:c.declaration)==null?void 0:h.toString())??"",date:(T=r.supervisor)!=null&&T.date?new Date(r.supervisor.date):null}),r!=null&&r.staff&&Object.keys(r.staff).length>0?x({comment:r.staff.comment||"",name:r.staff.name||"",declaration:r.staff.declaration??-1,date:r.staff.date||null}):x({comment:"",name:"",declaration:-1,date:null}),r!=null&&r.hr&&Object.keys(r.hr).length>0&&(j({comment:r.hr.comment||"",name:r.hr.name||"",declaration:r.hr.declaration??-1,date:r.hr.date||null}),console.log("HR Info:",r.hr));else throw new Error("No staff comment data found.")}catch(v){console.error("Error fetching data:",v),D("Failed to load data. Please try again.")}finally{b(!1)}};i.useEffect(()=>{I()},[]);const y=d=>{const{name:o,value:m}=d.target;l(c=>({...c,[o]:m}))},S=d=>{l(o=>({...o,date:d}))},f=async()=>{var o,m,c;const d={department_id:localStorage.getItem("selectedDepartmentID")||"",team_id:localStorage.getItem("selectedTeamID"),staff_id:a,year:localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),...t,name:s,declaration:parseInt(t.declaration,10),date:(o=t.date)==null?void 0:o.toISOString().split("T")[0]};try{(await V(d)).status===200&&O.push(e.jsx(R,{title:"Success",type:"success",children:"Data added successfully!"}),{placement:"top-center"})}catch(h){O.push(e.jsx(R,{title:"Error",type:"danger",children:((c=(m=h==null?void 0:h.response)==null?void 0:m.data)==null?void 0:c.error)||"Failed to submit data."}),{placement:"top-center"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 bg-green-700 rounded-lg shadow-md mb-4",children:e.jsx("h4",{className:"text-white font-semibold text-sm",children:"SECTION 4: CONFIRMATION AND ACKNOWLEDGEMENT"})}),e.jsx("div",{className:"p-3 border-2 rounded-lg shadow-sm bg-white w-full my-4",children:e.jsxs("div",{className:"flex flex-col text-sm text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-extrabold",children:["Appraisee Comment:"," "]}),n.comment||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Appraisee Name: "}),n.name||"N/A"]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-extrabold",children:["Appraisee Declaration:"," "]}),n.declaration===0?"Agree":n.declaration===1?"Disagree":"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Date: "}),n.date?new Date(n.date).toLocaleDateString():"N/A"]})]})}),w?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading..."}):e.jsxs("div",{className:"bg-white p-4 border-2 border-gray-300 rounded-lg shadow-sm space-y-4",children:[u&&e.jsx("p",{className:"text-red-500 text-sm",children:u}),e.jsx("div",{children:e.jsx(P,{textArea:!0,name:"comment",placeholder:"Write your words",value:t.comment,className:"block w-full text-sm border border-gray-300 rounded-md shadow-sm p-2",onChange:y})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appraiser Name"}),e.jsx(P,{disabled:!0,name:"name",type:"text",placeholder:"Appraisee Name",value:s,size:"sm",className:"w-full border border-gray-300 rounded-md p-2 text-sm shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appraiser Declaration"}),e.jsxs("select",{name:"declaration",value:t.declaration,className:"w-full border border-gray-300 rounded-md p-2 text-sm shadow-sm",onChange:y,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"0",children:"Agree"}),e.jsx("option",{value:"1",children:"Disagree"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx(k,{size:"sm",placeholder:"Pick a date",value:t.date,onChange:S})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(B,{variant:"solid",onClick:f,children:"Submit"})})]}),p&&e.jsx(W,{hrInfo:p})]})},Q=({idpfDetails:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 bg-green-700 rounded-lg shadow-md mb-4",children:e.jsx("h4",{className:"text-white font-semibold text-sm",children:"SECTION 2: INDIVIDUAL DEVELOPMENT PLAN"})}),e.jsxs("div",{className:"bg-white p-4 border-2 border-gray-300 rounded-lg shadow-sm space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-extrabold text-gray-700 mb-1 mt-2",children:"Long Term Goal:"}),e.jsx("p",{className:"text-sm border-2 p-4 rounded-lg text-gray-800 whitespace-pre-line",children:a.long_term_goal})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-extrabold text-gray-700 mb-1 mt-7",children:"Short Term Goal:"}),e.jsx("p",{className:"text-sm border-2 p-4 rounded-lg text-gray-800 whitespace-pre-line",children:a.short_term_goal})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(H,{className:"min-w-full border border-gray-300 text-sm text-left border-collapse",children:[e.jsx($,{className:"bg-gray-800 font-medium text-white",children:e.jsxs(F,{children:[e.jsx(g,{className:"px-3 py-2 bg-gray-300 border border-gray-500",children:"Goal(s)"}),e.jsx(g,{className:"px-3 py-2 bg-gray-300 border border-gray-500",children:"Objective(s)"}),e.jsx(g,{className:"px-3 py-2 bg-gray-300 border border-gray-500",children:"Talents / Strengths"}),e.jsx(g,{className:"px-3 py-2 bg-gray-300 border border-gray-500",children:"Resources Required"}),e.jsx(g,{className:"px-3 py-2 bg-gray-300 border border-gray-500",children:"Measurements"}),e.jsx(g,{className:"px-3 py-2 bg-gray-300 border border-gray-500",children:"Target Date"})]})}),e.jsx(z,{children:a.goals.map((s,t)=>{const[l,n,x]=s.target_date.split("/").map(Number),p=new Date(x,n-1,l);return e.jsxs(F,{children:[e.jsx(N,{className:"border border-gray-300 p-2",children:e.jsx("textarea",{readOnly:!0,className:"w-full h-20 resize-none outline-none bg-transparent",rows:2,value:s.goals})}),e.jsx(N,{className:"border border-gray-300 p-2",children:e.jsx("textarea",{readOnly:!0,className:"w-full h-20 resize-none outline-none bg-transparent",rows:2,value:s.objectives})}),e.jsx(N,{className:"border border-gray-300 p-2",children:e.jsx("textarea",{readOnly:!0,className:"w-full h-20 resize-none outline-none bg-transparent",rows:2,value:s.talents})}),e.jsx(N,{className:"border border-gray-300 p-2",children:e.jsx("textarea",{readOnly:!0,className:"w-full h-20 resize-none outline-none bg-transparent",rows:2,value:s.resources_required})}),e.jsx(N,{className:"border border-gray-300 p-2",children:e.jsx("textarea",{readOnly:!0,className:"w-full h-20 resize-none outline-none bg-transparent",rows:2,value:s.measurements})}),e.jsx(N,{className:"border border-gray-300 p-2",children:e.jsx(k,{disabled:!0,name:"targetDate",value:p,className:"w-full bg-transparent outline-none"})})]},t)})})]})})]}),X=({staff:a,supervisor:s})=>{const t={firstName:(a==null?void 0:a.F_Name)||"",middleName:(a==null?void 0:a.M_Name)||"",lastName:(a==null?void 0:a.L_Name)||"",role:(a==null?void 0:a.role)||"",ippisNo:(a==null?void 0:a.ippis_no)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||""},l={firstName:(s==null?void 0:s.F_Name)||"",middleName:(s==null?void 0:s.M_Name)||"",lastName:(s==null?void 0:s.L_Name)||"",role:(s==null?void 0:s.role)||"",email:(s==null?void 0:s.email)||"",ippis:(s==null?void 0:s.ippis_no)||"",phone:(s==null?void 0:s.phone)||"",designation:(s==null?void 0:s.role)||""};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-3 bg-green-600 rounded-lg shadow-md mb-2",children:e.jsx("h4",{className:"text-white font-semibold text-sm",children:"SECTION 1: (PERSONAL INFORMATION)"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-3 border-2 rounded-lg shadow-sm bg-white w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Apprisee Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"First Name:"})," ",t.firstName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Middle Name:"})," ",t.middleName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Last Name:"})," ",t.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Role:"})," ",t.role]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"IPPIS No.:"})," ",t.ippisNo]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Email:"})," ",t.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Phone:"})," ",t.phone]})]})]}),e.jsxs("div",{className:"p-4 border-2 rounded-lg shadow-sm bg-white w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Appraiser Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"First Name:"})," ",l.firstName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Middle Name:"})," ",l.middleName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Last Name:"})," ",l.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Role:"})," ",l.role]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Email:"})," ",l.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"IPPIS No.:"})," ",l.ippis]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Phone:"})," ",l.phone]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Designation:"})," ",l.designation]})]})]})]})]})},xe=()=>{const[a,s]=i.useState(null),{id:t}=C(),[l,n]=i.useState(!0),[x,p]=i.useState(null),j=(f,d)=>{const o=f.split(" ");return o.slice(0,d).join(" ")+(o.length>d?"...":"")};if(i.useEffect(()=>{(async()=>{try{const d=localStorage.getItem("selectedDepartmentID")||"",o=localStorage.getItem("selectedTeamID"),m=localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),c=await q(d,o?Number(o):null,m,String(t));if(c&&c.data)s(c.data);else throw new Error("Invalid response data")}catch(d){console.error("Error fetching data:",d),p("Failed to load data. Please try again.")}finally{n(!1)}})()},[t]),l)return e.jsx("div",{children:e.jsx(M,{loading:!0})});if(x)return e.jsx("div",{className:"text-red-500",children:x});if(!a)return e.jsx("div",{children:"No data available"});const{initial_data:{staff:w,supervisor:b,team:{team_name:u,team_description:D},department:{department_name:I,department_description:y}},idpf_details:S}=a;return e.jsxs("div",{className:"space-y-2 min-h-screen",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/img/logo/new-logo education.png",className:"h-16 w-48"}),e.jsx("p",{className:"text-lg font-bold text-black",children:"(Individual Development Plans Form)"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-end lg:items-center gap-4 lg:gap-8 text-right lg:text-left",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-semibold text-black",children:u}),e.jsx("p",{className:"text-gray-500",children:j(D,5)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-black",children:I}),e.jsx("p",{className:"text-gray-500",children:j(y,5)})]})]})]}),e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"p-4",children:e.jsx(G,{})}),e.jsx("div",{className:"p-4",children:e.jsx(U,{})})]}),e.jsx("section",{className:"p-4",children:e.jsx(X,{staff:w,supervisor:b})}),e.jsx("section",{className:"p-4",children:e.jsx(Q,{idpfDetails:S})}),e.jsx("section",{children:e.jsx(K,{})})]})};export{xe as default};

import{j as e,r as o,p as f,u as w,W as v,a0 as N}from"./index-D6LnowWG.js";import"./FormContainer-BasJK6Ay.js";import{C as g,a as b,b as u}from"./Tag-DB7agrS4.js";import{B as D}from"./hoist-non-react-statics.cjs-scs8r92F.js";import{P as y,b as T}from"./Upload-QoaHPTP1.js";import"./Select-3TZ7F_iK.js";import"./toast-DolkUlPG.js";import{n as S}from"./not_user-D__Z_M0H.js";import"./Views-DecklqFe.js";const _=({team_name:a,team_description:t,team_status:i,team_progressive:n})=>e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(g,{className:"md:col-span-2 bg-[#018752]",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h4",{className:"text-xl font-semibold text-white",children:a}),e.jsx(b,{className:`text-white ${i==="1"?"bg-green-600":"bg-gray-500"}`,children:i==="1"?"Active":"Inactive"})]}),e.jsx("p",{className:"mt-4 text-white",children:t})]})}),e.jsx(g,{className:"bg-[#018752]",children:e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-semibold text-white",children:"Progression"}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx(y,{variant:"circle",percent:n,width:100,strokeWidth:4,"aria-label":`Progress: ${n}%`})})]})})]}),I=({departments:a})=>{const[t,i]=o.useState(null),[n,l]=o.useState(window.innerWidth<=1024);o.useEffect(()=>{const r=()=>{l(window.innerWidth<=1024)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const s=r=>{i(r)};return e.jsxs("div",{className:"my-4 px-2",children:[e.jsx("h5",{className:"text-xl font-bold mb-4 text-gray-800",children:"Associated Department List"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map(r=>{const m=r.name,d=r.description.split(" "),j=d.length>15,c=d.slice(0,15).join(" ");return e.jsxs(g,{className:"bg-[#018752] rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 ease-in-out border border-gray-200",children:[e.jsx("h5",{className:"text-xl font-semibold text-white mb-2",children:m}),e.jsxs("p",{className:"text-white text-sm",children:[c,j&&e.jsxs(e.Fragment,{children:["..."," ",e.jsx("button",{className:"text-blue-400 hover:underline ml-1",onClick:()=>s(r),children:"View All"})]})]})]},r.department_id)})}),t&&e.jsx(T,{title:"Department Details",isOpen:!!t,placement:"right",width:n?"100%":600,onClose:()=>s(null),children:e.jsxs("div",{className:"p-6 bg-gray-100 rounded-md shadow-md",children:[e.jsx("h6",{className:"text-xl font-bold text-gray-800",children:t.name}),e.jsx("p",{className:"mt-3 text-gray-600 leading-relaxed",children:t.description})]})})]})},{Tr:p,Th:x,Td:h,THead:A,TBody:L}=u,P=({assignStaffs:a})=>{const t=f(),{staff_id:i}=w(s=>s.auth.user||{}),n=localStorage.getItem("selectedTeamID")||"";v(n);const l=s=>{t(`/officer/formList/${s}`)};return e.jsxs("div",{className:"my-6",children:[e.jsx("h5",{className:"text-lg font-semibold",children:"User List"}),e.jsxs(u,{compact:!0,className:"mt-4",children:[e.jsx(A,{children:e.jsxs(p,{children:[e.jsx(x,{children:"Name"}),e.jsx(x,{children:"Role"}),e.jsx(x,{children:"Action"})]})}),e.jsx(L,{children:a.map(s=>e.jsxs(p,{children:[e.jsx(h,{children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("img",{src:s.image||S,alt:s.name||"User Avatar",className:"w-10 h-10 rounded-full"}),e.jsx("span",{children:s.name})]})}),e.jsx(h,{children:s.role}),e.jsx(h,{children:e.jsx(D,{variant:"solid",disabled:s.role!=="staff",onClick:()=>l(s.staff_id),children:"View Form"})})]},s.staff_id))})]})]})};async function E(a){try{return(await N({url:`/officer/team_preview/${a}`,method:"get"})).data}catch(t){throw console.error("Error making API request:",t),t}}const R=()=>{const[a,t]=o.useState(null),i=localStorage.getItem("selectedTeamID");if(o.useEffect(()=>{(async()=>{if(i)try{const c=await E(i);t(c)}catch(c){console.error("Failed to fetch team details:",c)}else console.warn("No team ID found in local storage.")})()},[i]),!a)return e.jsx("p",{children:"Loading..."});const{team_name:n,team_description:l,team_status:s,team_progressive:r,team_department:m,team_assign_staffs:d}=a;return e.jsxs("div",{children:[e.jsx(_,{team_name:n,team_description:l,team_status:s,team_progressive:r}),e.jsx(I,{departments:m}),e.jsx(P,{assignStaffs:d})]})};export{R as default};

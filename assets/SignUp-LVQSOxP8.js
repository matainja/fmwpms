import{j as e,r as g,c as V,p as D,X as U}from"./index-CeEe7pb3.js";import{F as M,a as t}from"./FormContainer-ke5PD8DU.js";import{B}from"./Tag-DNSi-sYK.js";import{I as p,B as j}from"./hoist-non-react-statics.cjs-vQel0rgr.js";import{M as P,I as O,c as w,U as I}from"./Upload-Yey7eInk.js";import{S as q}from"./Select-CZx5-JQ3.js";import{t as y,N as S}from"./toast-1uGxBegS.js";import{A as $}from"./AdaptableCard-BxGKb4aW.js";import{S as A,a as G}from"./SvgIcon-eCFWFgY_.js";import{z as N,A as J,C as R}from"./Views-DRQ2IpiN.js";import{u as H}from"./useThemeClass-Cc4C5g-n.js";import{F as k,a as L,b as d}from"./formik.esm-BNab9qAF.js";import{c as T,b as o,d as Y}from"./index.esm-NDiyKl1H.js";import{D as _}from"./DoubleSidedImage-CTnLadyZ.js";import{D as z,N as K,P as X}from"./PassportSvg-DOmABeRR.js";import"./index-BJgCRTmY.js";import"./quill.snow-DfnqP1HH.js";import"./cloneDeep-DznBgb_t.js";const Q=[{label:"Personal Information",value:0},{label:"Identification",value:1},{label:"Account Details",value:2}],W=({currentStep:r,stepStatus:a})=>{const{textTheme:m}=H();return e.jsx(P,{variant:"transparent",className:"px-2 w-[215px]",children:Q.map(s=>e.jsxs(P.MenuItem,{eventKey:s.value.toString(),className:"mb-2",isActive:r===s.value,children:[e.jsxs("span",{className:"text-2xl ltr:mr-2 rtl:ml-2",children:[a[s.value].status==="complete"&&e.jsx(N,{className:m}),a[s.value].status==="current"&&e.jsx(N,{className:"text-gray-400"}),a[s.value].status==="pending"&&r===s.value&&e.jsx(N,{className:"text-gray-400"}),a[s.value].status==="pending"&&r!==s.value&&e.jsx(J,{className:"text-gray-400"}),a[s.value].status==="invalid"&&e.jsx(N,{className:"text-gray-400"})]}),e.jsx("span",{children:s.label})]},s.value))})},C=[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Others",value:"other"}],Z=T().shape({ippis_no:o().required("IPPIS No is required").matches(/^\d+$/,"IPPIS No must be a number"),F_Name:o().required("First Name is required"),M_Name:o(),L_Name:o().required("Last Name is required"),email:o().email("Invalid email").required("Email is required"),phone:o().required("Phone Number is required").matches(/^([789]\d{9})$/,"Enter a valid Nigerian phone number"),gender:o().required("Gender is required"),password:o().required("Password is required"),confirmPassword:o().oneOf([Y("password")],"Passwords must match").required("Please confirm your password")}),ee=({onFormSubmit:r})=>{const a={ippis_no:"",F_Name:"",M_Name:"",L_Name:"",email:"",phone:"",gender:"",password:"",confirmPassword:""},m=(s,{setSubmitting:l})=>{const{confirmPassword:x,...c}=s;console.log("Form Values:",c),r(c),l(!1)};return e.jsx(k,{initialValues:a,validationSchema:Z,onSubmit:m,children:({errors:s,touched:l,isSubmitting:x})=>e.jsx(L,{children:e.jsxs(M,{children:[e.jsxs("div",{className:"md:grid grid-cols-2 gap-2",children:[e.jsx(t,{label:"IPPIS NO.",invalid:!!(l.ippis_no&&s.ippis_no),errorMessage:s.ippis_no,children:e.jsx(d,{name:"ippis_no",type:"text",placeholder:"Input IPPIS NO.",as:p})}),e.jsx(t,{label:"First Name",invalid:!!(l.F_Name&&s.F_Name),errorMessage:s.F_Name,children:e.jsx(d,{name:"F_Name",type:"text",placeholder:"First Name",as:p})}),e.jsx(t,{label:"Middle Name",children:e.jsx(d,{name:"M_Name",type:"text",placeholder:"Middle Name (Optional)",as:p})}),e.jsx(t,{label:"Last Name",invalid:!!(l.L_Name&&s.L_Name),errorMessage:s.L_Name,children:e.jsx(d,{name:"L_Name",type:"text",placeholder:"Last Name",as:p})})]}),e.jsx(t,{label:"Email",invalid:!!(l.email&&s.email),errorMessage:s.email,children:e.jsx(d,{name:"email",type:"email",placeholder:"Email",as:p})}),e.jsxs("div",{className:"md:grid grid-cols-2 gap-2",children:[e.jsx(t,{label:"Gender",invalid:!!(l.gender&&s.gender),errorMessage:s.gender,children:e.jsx(d,{name:"gender",children:({field:c,form:u})=>e.jsx(q,{options:C,placeholder:"Select Gender",value:C.find(n=>n.value===c.value),onChange:n=>u.setFieldValue(c.name,n.value)})})}),e.jsx(t,{label:"Phone Number",invalid:!!(l.phone&&s.phone),errorMessage:s.phone,children:e.jsxs(O,{className:"flex  items-center",children:[e.jsx("div",{className:"min-w-[80px] px-4 py-3 border border-gray-300 rounded bg-gray-50 text-gray-700 text-sm",children:"(Nigeria) +234"}),e.jsx(d,{name:"phone",type:"text",placeholder:"e.g. 8123456789",as:p,className:"flex-1"})]})})]}),e.jsxs("div",{className:"md:grid grid-cols-2 gap-2",children:[e.jsx(t,{label:"Password",invalid:!!(l.password&&s.password),errorMessage:s.password,children:e.jsx(d,{name:"password",type:"password",placeholder:"Enter Password",as:p})}),e.jsx(t,{label:"Confirm Password",invalid:!!(l.confirmPassword&&s.confirmPassword),errorMessage:s.confirmPassword,children:e.jsx(d,{name:"confirmPassword",type:"password",placeholder:"Re-enter Password",as:p})})]}),e.jsx("div",{className:"flex justify-end gap-2 mt-4",children:e.jsx(j,{type:"submit",variant:"solid",loading:x,children:"Next"})})]})})})},se=[{value:"passport",label:"Passport",desc:""},{value:"nationalId",label:"National ID",desc:""},{value:"driversLicense",label:"Drivers License",desc:""}],ae={passport:["Uploaded passport image must be clearly visible & complete","Passport must be in valid period","Provided passport data page must include your full name, date of birth & your photo"],nationalId:["Uploaded ID image must be clearly visible","ID image must be in valid period","Provided ID must include your full name, date of birth & your photo"],driversLicense:["Uploaded driver license image must be clearly visible","Driver license must be in valid period","Uploaded driver license image must be clearly visible"]},le=({type:r=""})=>{switch(r){case"passport":return e.jsx(X,{});case"nationalId":return e.jsx(K,{});case"driversLicense":return e.jsx(z,{});default:return null}},re=({onFormBack:r,onFormSubmit:a})=>{const[m,s]=g.useState("passport"),[l,x]=g.useState(null),[c,u]=g.useState(null),[n,f]=g.useState({}),b=()=>{a({passportCover:l,passportDataPage:c})},h=()=>{a()};return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-2",children:"Identification"}),e.jsx("p",{children:"Upload relevant documents to verify your identity."})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"form-label mb-2",children:"Select your document type"}),e.jsx(w,{className:"flex xl:items-center flex-col xl:flex-row gap-4",value:[m],onChange:i=>s(i),children:se.map(i=>e.jsx(w.Item,{value:i.value,children:({active:v})=>e.jsx(A,{active:v,className:"w-full xl:w-[260px]",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(G,{className:V("text-4xl ltr:mr-3 rtl:ml-3",v&&"text-blue-500"),children:e.jsx(le,{type:i.value})}),e.jsx("h6",{children:i.label})]})})},i.value))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h6",{children:"To complete the upload and avoid delays, ensure the following:"}),e.jsx("ul",{className:"mt-4",children:ae[m].map((i,v)=>e.jsxs("li",{className:"mb-2 flex items-center",children:[e.jsx(B,{className:"rtl:ml-3 ltr:mr-3"}),e.jsx("span",{children:i})]},v))})]}),e.jsxs("div",{className:"grid xl:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"flex items-center font-semibold mb-2",children:"Passport Cover"}),e.jsx(I,{className:"cursor-pointer h-[300px] hover:border-indigo-600 flex items-center justify-center border-2 border-gray-600 border-dashed rounded-lg",onChange:i=>x(i[0]),children:e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"mx-auto mb-3",src:"/img/thumbs/passport.png",darkModeSrc:"/img/thumbs/passport-dark.png",alt:""}),e.jsxs("p",{className:"font-semibold",children:[e.jsx("span",{className:"text-gray-800",children:"Drop your image here, or"})," ",e.jsx("span",{className:"text-blue-500",children:"browse"})]}),e.jsx("p",{className:"mt-1 opacity-60",children:"Support: jpeg, png"})]})}),n.passportCover&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:n.passportCover})]}),e.jsxs("div",{children:[e.jsx("label",{className:"flex items-center font-semibold mb-2",children:"Passport Data Page"}),e.jsx(I,{className:"cursor-pointer h-[300px] hover:border-indigo-600 flex items-center justify-center border-2 border-gray-600 border-dashed rounded-lg",onChange:i=>u(i[0]),children:e.jsxs("div",{className:"text-center",children:[e.jsx(_,{className:"mx-auto mb-3",src:"/img/thumbs/passport-data.png",darkModeSrc:"/img/thumbs/passport-data-dark.png",alt:""}),e.jsxs("p",{className:"font-semibold",children:[e.jsx("span",{className:"text-gray-800",children:"Drop your image here, or"})," ",e.jsx("span",{className:"text-blue-500",children:"browse"})]}),e.jsx("p",{className:"mt-1 opacity-60",children:"Support: jpeg, png"})]})}),n.passportDataPage&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:n.passportDataPage})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(j,{type:"button",onClick:r,children:"Back"}),e.jsx(j,{variant:"outline",onClick:h,children:"Skip"}),e.jsx(j,{variant:"solid",onClick:b,children:"Next"})]})]})},F=Array.from({length:17},(r,a)=>({label:`${a+1}`,value:`${a+1}`})),ie={job_Title:"",Designation:"",cadre:"",grade_level:"",recovery_email:""},ne=T().shape({job_Title:o().required("Job Title is required"),Designation:o().required("Designation is required"),cadre:o().required("Cadre is required"),grade_level:o().required("Grade Level is required"),recovery_email:o().email("Invalid email").required("Recovery Email is required")}),te=({onFormBack:r,onFormSubmit:a})=>{const m=(s,{setSubmitting:l})=>{setTimeout(()=>{console.log(`Form Submitted:
`,JSON.stringify(s,null,2)),a(s),l(!1)},1500)};return e.jsx(k,{initialValues:ie,validationSchema:ne,onSubmit:m,children:({errors:s,touched:l,isSubmitting:x})=>e.jsx(L,{children:e.jsxs(M,{children:[e.jsx("h5",{className:"mb-4 text-lg font-semibold text-gray-800",children:"Complete Your Job Profile"}),e.jsxs("div",{className:"md:grid grid-cols-2 gap-4",children:[e.jsx(t,{label:"Job Title",invalid:!!(l.job_Title&&s.job_Title),errorMessage:s.job_Title,children:e.jsx(d,{name:"job_Title",type:"text",placeholder:"Job Title",as:p})}),e.jsx(t,{label:"Designation",invalid:!!(l.designation&&s.designation),errorMessage:s.designation,children:e.jsx(d,{name:"Designation",type:"text",placeholder:"Designation",as:p})})]}),e.jsxs("div",{className:"md:grid grid-cols-2 gap-4",children:[e.jsx(t,{label:"cadre",invalid:!!(l.cadre&&s.cadre),errorMessage:s.cadre,children:e.jsx(d,{name:"cadre",type:"text",placeholder:"Cadre",as:p})}),e.jsx(t,{label:"Grade Level",invalid:!!(l.grade_level&&s.grade_level),errorMessage:s.grade_level,children:e.jsx(d,{name:"grade_level",children:({field:c,form:u})=>e.jsx(q,{options:F,placeholder:"Select Grade Level",value:F.find(n=>n.value===c.value),onChange:n=>u.setFieldValue(c.name,n.value)})})})]}),e.jsx("div",{className:"md:grid grid-cols-1 gap-4",children:e.jsx(t,{label:"Recovery e-Mail",invalid:!!(l.recoveryEmail&&s.recoveryEmail),errorMessage:s.recoveryEmail,children:e.jsx(d,{name:"recovery_email",type:"email",placeholder:"Recovery Mail",as:p})})}),e.jsxs("div",{className:"flex justify-end gap-2 mt-6",children:[e.jsx(j,{type:"button",variant:"outline",onClick:r,children:"Back"}),e.jsx(j,{variant:"solid",type:"submit",disabled:x,children:x?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Submitting..."]}):"Submit"})]})]})})})},de=()=>{const r=D(),[a,m]=g.useState({index:0,status:"pending"}),[s,l]=g.useState({}),x={0:{status:"pending"},1:{status:"pending"},2:{status:"pending"},3:{status:"pending"},4:{status:"pending"}},c=()=>{a.index>0&&m({...a,index:a.index-1})},u=async n=>{var b;const f={...s,...n};if(l(f),a.index<2)m(h=>({...h,index:h.index+1}));else try{(await U.post("http://www.api.pmsx.online/api/signup",f)).status===201&&(y.push(e.jsx(S,{title:"Success",type:"success",children:"Data added successfully!"}),{placement:"top-center"}),m(i=>({...i,index:3})),r("/sign-in"))}catch(h){if(h.response&&((b=h.response.data)!=null&&b.errors)){const i=h.response.data.errors,v=Object.values(i).map(E=>E[0]).join(`
`);y.push(e.jsx(S,{title:"Success",type:"success",children:v}),{placement:"top-center"})}else y.push(e.jsx(S,{title:"Error",type:"danger",children:"Something went wrong. Please try again."}),{placement:"top-center"})}};return e.jsx(R,{className:"h-full",children:e.jsx($,{className:"h-full",bodyClass:"h-full",children:e.jsxs("div",{className:"grid lg:grid-cols-5 xl:grid-cols-3 2xl:grid-cols-5 gap-4",children:[a.index!==3&&e.jsx("div",{className:"2xl:col-span-1 xl:col-span-1 lg:col-span-2",children:e.jsx(W,{currentStep:a.index,stepStatus:x})}),e.jsx("div",{className:a.index!==3?"2xl:col-span-4 lg:col-span-3 xl:col-span-2 px-4":"lg:col-span-5 border",children:e.jsxs(g.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:[a.index===0&&e.jsx(ee,{onFormSubmit:u,initialValues:s}),a.index===1&&e.jsx(re,{onFormBack:c,onFormSubmit:u,initialValues:s}),a.index===2&&e.jsx(te,{onFormBack:c,onFormSubmit:u,initialValues:s}),a.index===3&&e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Thank you!"}),e.jsx("p",{className:"mt-2",children:"Your SignUp has been completed. Please check your email for further instructions."})]})]})})]})})})},_e=()=>{const r=D(),a=()=>{r("/sign-in")};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8 w-full px-4 flex justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"mb-1",children:"Sign Up"}),e.jsx("p",{children:"And let's get started "})]}),e.jsx("div",{className:"mt-2",children:e.jsx(j,{variant:"solid",onClick:a,children:"Back to Sign-In"})})]}),e.jsx("div",{children:e.jsx(de,{})})]})};export{_e as default};

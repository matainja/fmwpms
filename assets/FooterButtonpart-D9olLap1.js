import{a0 as h,r as f,j as e,u as P}from"./index-DxYrGPuB.js";import"./FormContainer-gQGx1Dsz.js";import{q as F,C as x}from"./Tag-BddxHN8B.js";import{m as u,B as g}from"./hoist-non-react-statics.cjs-Ci2CuKH8.js";import{P as k}from"./Upload-Ck9jiP_Q.js";import"./Select-xF-sg4aH.js";import{t as I,N as C}from"./toast-DqtlumJS.js";import{e as E}from"./index-BPz91XzU.js";import{j as S,O as D}from"./Views-CqBX4VKw.js";const A=async a=>{try{return await h({url:"/form_a_download",method:"get",params:a,responseType:"blob"})}catch(s){throw console.error("Error fetching PDF:",s),s}},O=({handleDownload:a})=>{const[s,t]=f.useState(!1),[l,r]=f.useState(!1),o=async()=>{t(!0),r(!1);try{await a(),r(!0)}catch(i){console.error("Download failed",i)}finally{t(!1),setTimeout(()=>r(!1),2e3)}};return e.jsx("div",{className:"mt-4 flex items-center justify-center",children:e.jsx(u.button,{className:`relative px-4 sm:px-6 py-3 font-semibold text-white rounded-lg shadow-md ${s?"bg-blue-400 cursor-not-allowed":l?"bg-green-500":"bg-white"}`,disabled:s,whileHover:{scale:s?1:1.05},whileTap:{scale:s?1:.95},onClick:o,children:s?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u.span,{className:"flex items-center",animate:{y:[0,10,0]},transition:{repeat:1/0,duration:.6,ease:"easeInOut"},children:e.jsx(E,{className:"h-5 w-5"})}),"Downloading..."]}):l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u.span,{initial:{scale:0},animate:{scale:1},transition:{duration:.3},children:"âœ…"}),"Download Complete!"]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(F,{className:"w-6 h-6 text-red-600"}),e.jsx("span",{className:"hidden sm:inline text-black font-bold",children:"Download Appraisal Report"})]})})})},z=async(a,s,t,l,r)=>{try{return await h({url:`/officer/form_c?department_id=${a}&team_id=${s}&year=${t}&staff_id=${r}&quater=${l}`,method:"get"})}catch(o){throw console.error("Error fetching information data:",o),o}},K=async(a,s,t,l)=>{try{return await h({url:`/officer/form_c_comments?department_id=${a}&team_id=${s}&year=${t}&staff_id=${l}`,method:"get"})}catch(r){throw console.error("Error fetching information data:",r),r}},V=async a=>{try{return await h({url:"/officer/form_c_comments",method:"post",data:a})}catch(s){throw console.error("Error fetching information data:",s),s}},R=async a=>{try{return await h({url:"/download",method:"get",params:a,responseType:"blob"})}catch(s){throw console.error("Error fetching PDF:",s),s}},X=({department:a,team:s,progress:t,title:l,downloadButton:r,staffID:o})=>{const i=(d,c)=>{const n=d.split(" ");return n.slice(0,c).join(" ")+(n.length>c?"...":"")};console.log(o,"staffID in header");const p=(a==null?void 0:a.department_name)||"N/A",N=(a==null?void 0:a.department_description)||"No description available",b=(s==null?void 0:s.team_name)||"N/A",j=(s==null?void 0:s.team_description)||"No description available",v=P(d=>d.quaterTab.selectedQuarter),w=(t==null?void 0:t[v])??0,y=async()=>{var d;try{const c={department_id:localStorage.getItem("selectedDepartmentID")||"",team_id:localStorage.getItem("selectedTeamID"),year:localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),staff_id:o};let n;if(S()===D?n=await R(c):n=await A(c),n&&n.data){const _=window.URL.createObjectURL(new Blob([n.data])),m=document.createElement("a");m.href=_,m.setAttribute("download","Appraisal_Report.pdf"),document.body.appendChild(m),m.click(),(d=m.parentNode)==null||d.removeChild(m)}else throw new Error("Failed to generate the PDF. Please try again.")}catch(c){console.error("Error downloading the PDF:",c),I.push(e.jsx(C,{title:"Error",type:"danger",children:"Failed to download the PDF. Please check your connection and try again."}),{placement:"top-center"})}};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsx("img",{src:"/img/logo/new-logo education.png",className:"h-12 sm:h-16 w-auto",alt:"Logo"})}),r&&e.jsx(O,{handleDownload:y})]}),e.jsx("h1",{className:"text-xl font-bold text-black mb-4 ml-1.5",children:l}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 lg:gap-4",children:[e.jsx(x,{bordered:!0,className:"mb-4 bg-green-600",children:e.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"text-white text-lg font-semibold mb-1",children:"PERFORMANCE APPRAISAL PERIOD"}),e.jsx("span",{className:"text-white text-sm",children:"1st Jan 2025 to 31st Dec 2025"})]}),e.jsx("div",{children:e.jsx(k,{variant:"circle",percent:w,width:80})})]})}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(x,{className:"flex-1 p-4 bg-white shadow-sm rounded-md",children:[e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"text-black font-bold mr-2",children:"Team Name:"}),i(b,12)]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"text-black font-bold mr-2",children:"Description:"}),i(j,12)]})]}),e.jsxs(x,{className:"flex-1 p-4 bg-white shadow-sm rounded-md",children:[e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"text-black font-bold mr-2",children:"Department Name:"}),i(p,12)]}),e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"text-black font-bold mr-2",children:"Description:"}),i(N,12)]})]})]})})]})]})},L=({employeeDetails:a})=>{const s=[{label:"Surname:",value:a.L_Name},{label:"Firstname:",value:a.F_Name},{label:"Othername:",value:a.M_Name||"N/A"},{label:"Role:",value:a.role},{label:"Email:",value:a.email},{label:"IPPIS No:",value:a.ippis_no},{label:"Phone:",value:a.phone},{label:"Designation",value:a.designation},{label:"Gender",value:a.gender},{label:"Grade Lavel",value:a.grade_level},{label:"Date of Posting to Current Job",value:a.date_of_current_posting},{label:"Date of Posting to MDA",value:a.date_of_MDA_posting},{label:"Date of Last Promotion",value:a.date_of_last_promotion}];return e.jsxs(x,{bordered:!0,className:"h-full flex flex-col",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:"Employee Information"})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-2 gap-x-6 gap-y-2",children:s.map((t,l)=>e.jsxs("div",{className:"flex group",children:[e.jsx("div",{className:"font-bold text-black mr-2 whitespace-nowrap",children:t.label}),e.jsx("div",{className:"text-gray-900 max-w-[180px] truncate cursor-pointer",title:t.value,children:t.value})]},l))})]})},$=({supervisorDetails:a})=>{const s=[{key:"First Name",value:a.F_Name},{key:"Other Name",value:a.M_Name||"N/A"},{key:"Last Name",value:a.L_Name},{key:"Role",value:a.role},{key:"Email",value:a.email},{key:"IPPIS No",value:a.ippis_no},{key:"Phone",value:a.phone},{key:"Designation",value:a.designation}];return e.jsxs(x,{bordered:!0,className:"mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:"Supervisor Information"})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-2",children:s.map((t,l)=>e.jsxs("div",{className:"flex group",children:[e.jsxs("div",{className:"font-bold text-black mr-2 whitespace-nowrap",children:[t.key,":"]}),e.jsx("div",{className:"text-gray-900 sm:full sm:truncate cursor-pointer",title:t.value,children:t.value})]},l))})]})},T=({officerDetails:a})=>{const s=[{label:"Surname:",value:a.L_Name},{label:"Firstname:",value:a.F_Name},{label:"Othername:",value:a.M_Name||"N/A"},{label:"IPPIS No:",value:a.ippis_no},{label:"Role",value:a.role},{label:"Designation:",value:a.role},{label:"Email:",value:a.email},{label:"Phone:",value:a.phone}];return e.jsxs(x,{bordered:!0,className:"mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx("h6",{className:"text-lg font-semibold text-gray-800",children:"Counter-Signing Officer's Information"})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-6 gap-y-2",children:s.map((t,l)=>e.jsxs("div",{className:"flex group",children:[e.jsx("div",{className:"font-bold text-black mr-2 whitespace-nowrap",children:t.label}),e.jsx("div",{className:"text-gray-900 max-w-[180px] truncate cursor-pointer",title:t.value,children:t.value})]},l))})]})},Z=({staff:a,supervisor:s,officer:t})=>e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"h-[98%]",children:a&&e.jsx(L,{employeeDetails:a})})}),e.jsxs("div",{className:"flex flex-col gap-3 flex-1",children:[s&&e.jsx($,{supervisorDetails:s}),t&&e.jsx(T,{officerDetails:t})]})]}),ee=({next:a,handleNext:s,back:t,handleBack:l,save:r,handleSave:o})=>e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center mt-10 gap-4 sm:gap-0",children:[e.jsx(g,{variant:"solid",className:"w-full sm:w-auto",onClick:l,children:t}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[e.jsx(g,{variant:"solid",className:"w-full sm:w-auto",onClick:o,children:r}),e.jsx(g,{variant:"solid",className:"w-full sm:w-auto",onClick:s,children:a})]})]});export{ee as F,X as H,Z as I,K as O,V as a,z as b};

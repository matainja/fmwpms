import{j as e,a0 as _,u as k,r as i,J as Y}from"./index-CdXcW46_.js";import"./FormContainer-B5i-gxwG.js";import{b as M,c as G,d as P,e as w,f as H,g as C}from"./Tag-BIrPdKNG.js";import{I as R,B as q}from"./hoist-non-react-statics.cjs-BYdDfNAW.js";import{e as L}from"./Upload-CkxX527j.js";import"./Select-epRO6R5x.js";import{t as S,N as v}from"./toast-DnPvOHpm.js";import"./SvgIcon-789oDBY2.js";import"./Views-YlTiOC4j.js";import"./index-8ORoQwk5.js";import"./quill.snow-CicULtXM.js";import"./cloneDeep-DznBgb_t.js";import"./useThemeClass-Cjhy4_sh.js";const B=()=>e.jsx("div",{className:"flex justify-between items-start border-2 rounded-lg p-8",children:e.jsxs("div",{className:"font-light",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"What is the IDPF Form?"}),e.jsxs("p",{className:"text-sm text-gray-700 leading-relaxed",children:["The"," ",e.jsx("span",{className:"font-medium",children:"Personal Development Plan Form (IDPF)"})," ","is one of the Performance Management templates designed to support and enhance professional growth during the performance period. It is completed after necessary discussions and agreements between the"," ",e.jsx("span",{className:"font-medium",children:"appraisee"})," and the"," ",e.jsx("span",{className:"font-medium",children:"appraiser"}),"."]}),e.jsxs("div",{className:"mt-3 text-sm text-gray-700 leading-relaxed",children:[e.jsx("p",{className:"mb-1 font-semibold",children:"The IDPF helps in:"}),e.jsxs("ol",{type:"a",className:"list-disc list-inside space-y-1",children:[e.jsx("li",{children:"Identifying and pursuing your personal goals for professional development"}),e.jsx("li",{children:"Setting goals to learn or improve on key competencies you will need now or in the future"}),e.jsx("li",{children:"Recognizing your strengths, talents, and passions and planning ways to apply them at work"})]})]})]})}),$=()=>e.jsxs("div",{className:"p-36 border-2 rounded-lg shadow-sm bg-white w-full max-w-4xl",children:[e.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Appraisal Period Covered"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["1st January 2024"," to ","31st December 2024"]})]}),z=({staff:a,supervisor:t})=>{const n={firstName:(a==null?void 0:a.F_Name)||"",middleName:(a==null?void 0:a.M_Name)||"",lastName:(a==null?void 0:a.L_Name)||"",role:(a==null?void 0:a.role)||"",ippisNo:(a==null?void 0:a.ippis_no)||"",email:(a==null?void 0:a.email)||"",phone:(a==null?void 0:a.phone)||""},r={firstName:(t==null?void 0:t.F_Name)||"",middleName:(t==null?void 0:t.M_Name)||"",lastName:(t==null?void 0:t.L_Name)||"",role:(t==null?void 0:t.role)||"",email:(t==null?void 0:t.email)||"",ippis:(t==null?void 0:t.ippis_no)||"",phone:(t==null?void 0:t.phone)||"",designation:(t==null?void 0:t.role)||""};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"p-3 bg-green-600 rounded-lg shadow-md mb-2",children:e.jsx("h4",{className:"text-white font-semibold text-sm",children:"SECTION 1: (PERSONAL INFORMATION)"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-3 border-2 rounded-lg shadow-sm bg-white w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Apprisee Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"First Name:"}),n.firstName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Middle Name:"}),n.middleName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Last Name:"}),n.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Role:"}),n.role]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"IPPIS No.:"}),n.ippisNo]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Email:"}),n.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Phone:"}),n.phone]})]})]}),e.jsxs("div",{className:"p-4 border-2 rounded-lg shadow-sm bg-white w-full",children:[e.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-800",children:"Appraiser Information"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"First Name:"}),r.firstName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Middle Name:"}),r.middleName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Last Name:"}),r.lastName]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Role:"}),r.role]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Email:"}),r.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"IPPIS No.:"}),r.ippis]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Phone:"}),r.phone]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Designation:"}),r.designation]})]})]})]})]})},U=({hrInfo:a})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 bg-green-700 rounded-lg shadow-md mb-4",children:e.jsx("h4",{className:"text-white font-semibold text-sm",children:"FOR USE ONLY BY THE HUMAN RESOURCE DEPARTMENT"})}),e.jsx("div",{className:"p-3 border-2 rounded-lg shadow-sm bg-white w-full mb-4",children:e.jsxs("div",{className:"flex flex-col text-sm text-gray-700",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-extrabold",children:["HR's Comment:"," "]}),a.comment||"N/A"]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-extrabold",children:"Date of Receipt in HR's Dept.:"})," ",a.date?new Date(a.date).toLocaleDateString():"N/A"]}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-extrabold",children:"HR's Name: "}),a.name||"N/A"]}),e.jsxs("p",{className:"mt-1",children:[e.jsxs("span",{className:"font-extrabold",children:["HR's Declaration:"," "]}),a.declaration===0?"Approved":a.declaration===1?"Rejected":"N/A"]})]})})]}),W=async(a,t,n)=>{try{return await _({url:`/idpf?department_id=${a}&team_id=${t}&year=${n}`,method:"get"})}catch(r){throw console.error("Error fetching information data:",r),r}},V=async a=>{try{return await _({url:"/idpf",method:"post",data:a})}catch(t){throw console.error("Error fetching information data:",t),t}},J=async(a,t,n)=>{try{return await _({url:`/idpf_comments?department_id=${a}&team_id=${t}&year=${n}`,method:"get"})}catch(r){throw console.error("Error fetching information data:",r),r}},K=async a=>{try{return await _({url:"/idpf_comments",method:"post",data:a})}catch(t){throw console.error("Error fetching information data:",t),t}},Q=()=>{const{userName:a}=k(s=>s.auth.user||{}),[t,n]=i.useState({comment:"",name:"",declaration:"",date:null}),[r,p]=i.useState({comment:"",name:"",declaration:-1,date:null}),[u,y]=i.useState(null),[D,j]=i.useState(!1),[f,o]=i.useState(""),x=async()=>{var s,c,g,h,b,A;j(!0);try{const T=localStorage.getItem("selectedDepartmentID")||"",F=localStorage.getItem("selectedTeamID"),O=localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),E=await J(T,F?Number(F):null,O),l=(s=E==null?void 0:E.data)==null?void 0:s.comments;if(l)n({comment:((c=l.staff)==null?void 0:c.comment)||"",name:((g=l.staff)==null?void 0:g.name)||"",declaration:((b=(h=l.staff)==null?void 0:h.declaration)==null?void 0:b.toString())??"",date:(A=l.staff)!=null&&A.date?new Date(l.staff.date):null}),l!=null&&l.supervisor&&Object.keys(l.supervisor).length>0?p({comment:l.supervisor.comment||"",name:l.supervisor.name||"",declaration:l.supervisor.declaration??-1,date:l.supervisor.date||null}):p({comment:"",name:"",declaration:-1,date:null}),l!=null&&l.hr&&Object.keys(l.hr).length>0&&y({comment:l.hr.comment||"",name:l.hr.name||"",declaration:l.hr.declaration??-1,date:l.hr.date||null});else throw new Error("No staff comment data found.")}catch(T){console.error("Error fetching data:",T),o("Failed to load data. Please try again.")}finally{j(!1)}};i.useEffect(()=>{x()},[]);const d=s=>{const{name:c,value:g}=s.target;n(h=>({...h,[c]:g}))},m=s=>{n(c=>({...c,date:s}))},N=async()=>{var c,g,h;const s={department_id:localStorage.getItem("selectedDepartmentID")||"",team_id:localStorage.getItem("selectedTeamID"),year:localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),...t,name:a,declaration:Number(t.declaration),date:(c=t.date)==null?void 0:c.toISOString().split("T")[0]};try{(await K(s)).status===200&&S.push(e.jsx(v,{title:"Success",type:"success",children:"Data added successfully!"}),{placement:"top-center"})}catch(b){S.push(e.jsx(v,{title:"Error",type:"danger",children:((h=(g=b==null?void 0:b.response)==null?void 0:g.data)==null?void 0:h.error)||"Failed to submit data."}),{placement:"top-center"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 bg-green-700 rounded-lg shadow-md mb-4",children:e.jsx("h4",{className:"text-white font-semibold text-sm",children:"SECTION 4: CONFIRMATION AND ACKNOWLEDGEMENT"})}),D?e.jsx("p",{className:"text-sm text-gray-500",children:"Loading..."}):e.jsxs("div",{className:"bg-white p-4 border-2 border-gray-300 rounded-lg shadow-sm space-y-4",children:[f&&e.jsx("p",{className:"text-red-500 text-sm",children:f}),e.jsx("div",{children:e.jsx(R,{textArea:!0,name:"comment",placeholder:"Write your words",value:t.comment,className:"block w-full text-sm border border-gray-300 rounded-md shadow-sm p-2",onChange:d})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appraisee Name"}),e.jsx(R,{disabled:!0,name:"name",type:"text",placeholder:"Appraisee Name",value:a,size:"sm",className:"w-full border border-gray-300 rounded-md p-2 text-sm shadow-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Appraisee Declaration"}),e.jsxs("select",{name:"declaration",value:t.declaration,className:"w-full border border-gray-300 rounded-md p-2 text-sm shadow-sm",onChange:d,children:[e.jsx("option",{value:"",children:"Select"}),e.jsx("option",{value:"0",children:"Agree"}),e.jsx("option",{value:"1",children:"Disagree"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date"}),e.jsx(L,{size:"sm",placeholder:"Pick a date",value:t.date,onChange:m})]})]}),e.jsx("div",{className:"flex justify-end pt-4",children:e.jsx(q,{variant:"solid",onClick:N,children:"Submit"})})]}),e.jsx("div",{className:"p-3 border-2 rounded-lg shadow-sm bg-white w-full my-4",children:e.jsxs("div",{className:"flex flex-col text-sm text-gray-700 space-y-1",children:[e.jsxs("p",{children:[e.jsxs("span",{className:"font-extrabold",children:["Appraiser Comment:"," "]}),r.comment||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Appraiser Name: "}),r.name||"N/A"]}),e.jsxs("p",{children:[e.jsxs("span",{className:"font-extrabold",children:["Appraiser Declaration:"," "]}),r.declaration===0?"Agree":r.declaration===1?"Disagree":"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-extrabold",children:"Date: "}),r.date?new Date(r.date).toLocaleDateString():"N/A"]})]})}),u&&e.jsx(U,{hrInfo:u})]})},I=()=>({goals:"",objectives:"",talents:"",resources_required:"",measurements:"",target_date:""}),X=({idpfDetails:a})=>{const t=a.goals.length?a.goals:[I(),I(),I(),I(),I()],[n,r]=i.useState(t),[p,u]=i.useState(a.long_term_goal||""),[y,D]=i.useState(a.short_term_goal||""),j=(o,x,d)=>{const m=[...n];m[o]={...m[o],[x]:d},r(m)},f=async()=>{var m,N;const o=n.filter(s=>s.goals.trim()||s.objectives.trim()||s.talents.trim()||s.resources_required.trim()||s.measurements.trim()||s.target_date.trim());if(o.length===0){S.push(e.jsx(v,{title:"Validation Error",type:"danger",children:"Please fill in at least one row before submitting."}),{placement:"top-center"});return}const x=o.map(s=>({goals:s.goals,objectives:s.objectives,talents:s.talents,resources_required:s.resources_required,measurements:s.measurements,target_date:s.target_date})),d={department_id:localStorage.getItem("selectedDepartmentID")||"",team_id:localStorage.getItem("selectedTeamID")||"",year:localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),long_term_goal:p,short_term_goal:y,goals_list:x};try{(await V(d)).status===201&&S.push(e.jsx(v,{title:"Success",type:"success",children:"Data added successfully!"}),{placement:"top-center"})}catch(s){S.push(e.jsx(v,{title:"Error",type:"danger",children:((N=(m=s==null?void 0:s.response)==null?void 0:m.data)==null?void 0:N.error)||"Failed to submit data."}),{placement:"top-center"})}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 bg-green-700 rounded-lg shadow-md mb-4",children:e.jsx("h4",{className:"text-white font-semibold text-sm",children:"SECTION 2: INDIVIDUAL DEVELOPMENT PLAN"})}),e.jsxs("div",{className:"bg-white p-4 border-2 border-gray-300 rounded-lg shadow-sm space-y-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-extrabold text-gray-700 mb-1 mt-2",children:"Long Term Goal:"}),e.jsx("textarea",{className:"w-full border-2 p-2 rounded-lg text-gray-800",rows:4,value:p,onChange:o=>u(o.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-extrabold text-gray-700 mb-1 mt-7",children:"Short Term Goal:"}),e.jsx("textarea",{className:"w-full border-2 p-2 rounded-lg text-gray-800",rows:4,value:y,onChange:o=>D(o.target.value)})]})]}),e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(M,{className:"min-w-full border border-gray-300 text-sm text-left border-collapse",children:[e.jsx(G,{className:"bg-gray-800 font-medium text-white",children:e.jsxs(P,{children:[e.jsx(w,{className:"px-3 py-2 border border-gray-500 bg-gray-300",children:"Goal(s)"}),e.jsx(w,{className:"px-3 py-2 border border-gray-500 bg-gray-300",children:"Objective(s)"}),e.jsx(w,{className:"px-3 py-2 border border-gray-500 bg-gray-300",children:"Talents / Strengths"}),e.jsx(w,{className:"px-3 py-2 border border-gray-500 bg-gray-300",children:"Resources Required"}),e.jsx(w,{className:"px-3 py-2 border border-gray-500 bg-gray-300",children:"Measurements"}),e.jsx(w,{className:"px-3 py-2 border border-gray-500 bg-gray-300",children:"Target Date"})]})}),e.jsx(H,{children:n.map((o,x)=>e.jsxs(P,{children:[["goals","objectives","talents","resources_required","measurements"].map(d=>e.jsx(C,{className:"border border-gray-300",children:e.jsx("textarea",{className:"w-full h-20 overflow-hidden resize-none outline-none bg-transparent",rows:2,value:o[d],onChange:m=>j(x,d,m.target.value)})},d)),e.jsx(C,{className:"border border-gray-300",children:e.jsx(L,{disabled:!1,name:"targetDate",value:o.target_date?new Date(o.target_date.split("/").reverse().join("-")):null,className:"w-full bg-transparent outline-none",onChange:d=>d&&j(x,"target_date",d.toLocaleDateString("en-GB"))})})]},x))})]}),e.jsx("div",{className:"mt-6 text-right",children:e.jsx("button",{className:"px-6 py-2 bg-green-700 text-white font-semibold rounded-lg shadow hover:bg-blue-800 transition",onClick:f,children:"Submit"})})]})]})},xe=()=>{const[a,t]=i.useState(null),[n,r]=i.useState(!0),[p,u]=i.useState(null);if(i.useEffect(()=>{(async()=>{try{const s=localStorage.getItem("selectedDepartmentID")||"",c=localStorage.getItem("selectedTeamID"),g=localStorage.getItem("selectedYear")?Number(localStorage.getItem("selectedYear")):new Date().getFullYear(),h=await W(s,c?Number(c):null,g);if(h&&h.data)t(h.data);else throw new Error("Invalid response data")}catch(s){console.error("Error fetching data:",s),u("Failed to load data. Please try again.")}finally{r(!1)}})()},[]),n)return e.jsx("div",{children:e.jsx(Y,{loading:!0})});if(p)return e.jsx("div",{className:"text-red-500",children:p});if(!a)return e.jsx("div",{children:"No data available"});const{initial_data:{staff:y,supervisor:D,team:{team_name:j,team_description:f},department:{department_name:o,department_description:x}},idpf_details:d}=a,m=(N,s)=>{const c=N.split(" ");return c.slice(0,s).join(" ")+(c.length>s?"...":"")};return e.jsxs("div",{className:" space-y-2 min-h-screen",children:[e.jsxs("header",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[e.jsxs("div",{children:[e.jsx("img",{src:"/img/logo/new-logo education.png",className:"h-16 w-48"}),e.jsx("p",{className:"text-lg font-bold text-black",children:"(Individual Development Plans Form)"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row items-end lg:items-center gap-4 lg:gap-8 text-right lg:text-left",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-black",children:j}),e.jsx("p",{className:"text-gray-500",children:f})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-black",children:o}),e.jsx("p",{className:"text-gray-500",children:m(x,5)})]})]})]}),e.jsxs("section",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"  p-4",children:e.jsx(B,{})}),e.jsx("div",{className:" p-4",children:e.jsx($,{})})]}),e.jsx("section",{className:" p-4",children:e.jsx(z,{staff:y,supervisor:D})}),e.jsx("section",{className:"p-4",children:e.jsx(X,{idpfDetails:d})}),e.jsx("section",{children:e.jsx(Q,{})})]})};export{xe as default};
